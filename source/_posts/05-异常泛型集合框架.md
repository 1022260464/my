---
title: 05å¼‚å¸¸ã€æ³›å‹ã€é›†åˆæ¡†æ¶ï¼ˆList|ArrayListï¼LinkedListï¼‰
date: '2026-02-03 22:07:00'
updated: '2026-02-05 15:29:36'
permalink: /post/05-exceptions-generics-collection-framework-zrnae2.html
comments: true
toc: true
---



# 05å¼‚å¸¸ã€æ³›å‹ã€é›†åˆæ¡†æ¶ï¼ˆList|ArrayListï¼LinkedListï¼‰

### 1. è®¤è¯†å¼‚å¸¸ (Understanding Exceptions)

å¼‚å¸¸ï¼ˆExceptionï¼‰æ˜¯æŒ‡ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„éæ­£å¸¸æƒ…å†µã€‚åœ¨ Java ä¸­ï¼Œå¼‚å¸¸ä¹Ÿæ˜¯å¯¹è±¡ã€‚

#### å¼‚å¸¸çš„ç»§æ‰¿ä½“ç³»

æ‰€æœ‰çš„å¼‚å¸¸éƒ½æ¥è‡ªäºå…±åŒçš„ç¥–å…ˆ `Throwable`ã€‚

**ä¸¤å¤§åˆ†ç±»ï¼š**

1. â€‹**Error (é”™è¯¯)** ï¼š

   - ä»£è¡¨â€‹**ç³»ç»Ÿçº§åˆ«çš„ä¸¥é‡é”™è¯¯**â€‹ï¼ˆå¦‚å†…å­˜æº¢å‡º `OutOfMemoryError`â€‹ï¼Œæ ˆæº¢å‡º `StackOverflowError`ï¼‰ã€‚
   - **ç‰¹ç‚¹**ï¼šè¿™æ˜¯â€œç»ç—‡â€ï¼Œé€šå¸¸ä»£ç æ— æ³•ä¿®å¤ï¼Œ**ä¸éœ€è¦æ•è·**ã€‚
   - Errorï¼šä»£è¡¨çš„ç³»ç»Ÿçº§åˆ«é”™è¯¯(å±äºä¸¥é‡é—®é¢˜)ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œsunå…¬å¸ä¼šæŠŠè¿™äº›é—®é¢˜å°è£…æˆErrorå¯¹è±¡ç»™å‡ºæ¥  
     ( è¯´ç™½äº†ï¼ŒErroræ˜¯ç»™sunå…¬å¸è‡ªå·±ç”¨çš„ï¼Œä¸æ˜¯ç»™æˆ‘ä»¬ç¨‹åºå‘˜ç”¨çš„ï¼Œå› æ­¤æˆ‘ä»¬å¼€å‘äººå‘˜ä¸ç”¨ç®¡å®ƒ)
2. â€‹**Exception (å¼‚å¸¸)** ï¼š

   - ä»£è¡¨â€‹**ç¨‹åºå¯èƒ½å‡ºç°çš„é—®é¢˜**ï¼Œæ˜¯æˆ‘ä»¬å¤„ç†çš„æ ¸å¿ƒã€‚
   - å®ƒåˆåˆ†ä¸ºä¸¤ç±»ï¼ˆè¿™æ˜¯é¢è¯•å¿…è€ƒç‚¹ï¼‰ï¼š

     ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šæ²¡æœ‰ç»§æ‰¿RuntimeExcpetionçš„å¼‚å¸¸ï¼Œç¼–è¯‘é˜¶æ®µå°±ä¼šå‡ºé”™ã€‚  
     è¿è¡Œæ—¶å¼‚å¸¸ï¼šç»§æ‰¿è‡ªRuntimeExceptionçš„å¼‚å¸¸æˆ–å…¶å­ç±»ï¼Œç¼–è¯‘é˜¶æ®µä¸æŠ¥é”™ï¼Œè¿è¡Œæ—¶å‡ºç°çš„ã€‚

|**ç±»å‹**|**åå­—**|**ä¸¾ä¾‹**|**ç‰¹ç‚¹**|**å¤„ç†åŸåˆ™**||||||
| --| -------------------| ------------| ------------------------------------------| ------------------------| --| --| --| --| --|
|**ç¼–è¯‘æ—¶å¼‚å¸¸**|Checked Exception|â€‹`IOException`â€‹,`SQLException`â€‹,`ClassNotFoundException`|ç¼–è¯‘å™¨**å¼ºåˆ¶**è¦æ±‚å¤„ç†ï¼Œå¦åˆ™â€‹**ä»£ç çˆ†çº¢**ï¼Œç¼–è¯‘ä¸é€šè¿‡ã€‚|**å¿…é¡»**try-catch æˆ– throws||||||
|**è¿è¡Œæ—¶å¼‚å¸¸**|RuntimeException|â€‹`NullPointerException`â€‹,`IndexOutOfBoundsException`â€‹,`ArithmeticException`|ç¼–è¯‘å™¨ä¸æŠ¥é”™ï¼Œè¿è¡Œæ—¶æ‰æŠ¥é”™ã€‚é€šå¸¸æ˜¯â€‹**ä»£ç é€»è¾‘å†™é”™äº†**ã€‚|**å»ºè®®**ä¸å¤„ç†ï¼Œè€Œæ˜¯æ”¹ä»£ç é€»è¾‘||||||

---

### 2. å¼‚å¸¸çš„å¤„ç†æ–¹æ¡ˆ (Handling Schemes)

å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§åº”å¯¹ç­–ç•¥ï¼š **â€œè‡ªå·±è§£å†³â€**  å’Œ â€‹ **â€œç”©é”…ç»™åˆ«äººâ€** ã€‚

#### æ–¹æ¡ˆ Aï¼šæ•è·å¼‚å¸¸ (try-catch) â€”â€” "æˆ‘è‡ªå·±å¤„ç†"

- â€‹**ä½œç”¨**ï¼šæ‹¦æˆªå¼‚å¸¸ï¼Œä¿è¯ç¨‹åºä¸å´©æºƒï¼Œåç»­ä»£ç èƒ½ç»§ç»­æ‰§è¡Œã€‚
- **æ ¼å¼**ï¼š
- ```java
  try {
      // å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç 
      int result = 10 / 0; 
  } catch (ArithmeticException e) {
      // å‡ºç°å¼‚å¸¸åçš„è¡¥æ•‘æªæ–½
      System.out.println("ç®—æœ¯ç®—é”™äº†ï¼Œé™¤æ•°ä¸èƒ½ä¸º0");
      e.printStackTrace(); // æ‰“å°è¯¦ç»†é”™è¯¯ä¿¡æ¯ (å¼€å‘å¿…å†™)
  } finally {
      // ã€å¯é€‰ã€‘æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ (é€šå¸¸ç”¨äºé‡Šæ”¾èµ„æºï¼Œå¦‚å…³é—­æ–‡ä»¶/æ•°æ®åº“)
      System.out.println("èµ„æºé‡Šæ”¾");
  }
  ```

#### æ–¹æ¡ˆ Bï¼šæŠ›å‡ºå¼‚å¸¸ (throws) â€”â€” "ç”©é”…ç»™è°ƒç”¨è€…"

- â€‹**ä½œç”¨**ï¼šæˆ‘ä¸å¤„ç†ï¼Œæˆ‘æŠŠå¼‚å¸¸æŠ›ç»™è°ƒç”¨æˆ‘çš„é‚£ä¸ªäººå»å¤„ç†ã€‚
- **æ ¼å¼**ï¼šåœ¨æ–¹æ³•å®šä¹‰ä¸Šä½¿ç”¨ `throws` å…³é”®å­—ã€‚
- ## ï¼ˆç›´æ¥æŠ›çˆ¶ç±»exceptionå³å¯ï¼‰!!!(å¤šæ€)
- ```java
  // æ„æ€æ˜¯ï¼šæˆ‘è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šå‡ºæ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼Œè°è°ƒç”¨æˆ‘è°è´Ÿè´£å¤„ç†
  public void readFile() throws FileNotFoundExceptionï¼ˆç›´æ¥æŠ›çˆ¶ç±»exceptionå³å¯ï¼‰ {
      FileInputStream is = new FileInputStream("ä¸å­˜åœ¨çš„æ–‡ä»¶.txt");
  }
  ```

 **ğŸ¤” åˆ°åº•ç”¨å“ªç§ï¼Ÿ**

- â€‹**åº•å±‚æ–¹æ³•**â€‹ï¼ˆæ¯”å¦‚å·¥å…·ç±»ï¼‰ï¼šé€šå¸¸ç”¨ â€‹**throws**ï¼ŒæŠ›å‡ºå»å‘Šè¯‰ä¸Šå±‚å‘ç”Ÿäº†ä»€ä¹ˆã€‚
- â€‹**é¡¶å±‚æ–¹æ³•**â€‹ï¼ˆæ¯”å¦‚ `main`â€‹ æ–¹æ³•æˆ– Controllerï¼‰ï¼šé€šå¸¸ç”¨ â€‹**try-catch**ï¼Œå› ä¸ºæ²¡äººå¯ç”©äº†ï¼Œå¿…é¡»æœ€ç»ˆè§£å†³æ‰ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„æç¤ºã€‚

---

### 3. è‡ªå®šä¹‰å¼‚å¸¸ (Custom Exceptions)

**ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ï¼Ÿ**

Java æä¾›çš„å¼‚å¸¸ï¼ˆå¦‚ `IndexOutOfBoundsException`ï¼‰æ˜¯é€šç”¨çš„ï¼Œä½†ç”±äºä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚â€œé“¶è¡Œå¡ä½™é¢ä¸è¶³â€ã€â€œç”¨æˆ·æœªæ»¡18å²â€ï¼‰Java æ— æ³•é¢„çŸ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰ç¬¦åˆä¸šåŠ¡å«ä¹‰çš„å¼‚å¸¸ã€‚

#### å®ç°æ­¥éª¤

1. â€‹**å®šä¹‰ä¸€ä¸ªç±»**â€‹ï¼šé€šå¸¸ä»¥ `Exception` ç»“å°¾ã€‚
2. â€‹**ç»§æ‰¿çˆ¶ç±»**ï¼š

   - ç»§æ‰¿ `RuntimeException`â€‹ (â€‹**æ¨è**)ï¼šå˜æˆè¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½¿ç”¨æ›´çµæ´»ï¼Œä¸éœ€è¦åˆ°å¤„å†™ throwsã€‚
   - ç»§æ‰¿ `Exception`ï¼šå˜æˆç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œå¼ºè¿«è°ƒç”¨è€…å¤„ç†ã€‚
3. â€‹**æ„é€ å™¨**â€‹ï¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ `super(message)`ã€‚

#### ä»£ç ç¤ºä¾‹ï¼šæ£€æŸ¥å¹´é¾„

Java

```
// 1. å®šä¹‰å¼‚å¸¸ç±» (ç»§æ‰¿ RuntimeException)
class AgeIllegalException extends RuntimeException {
    public AgeIllegalException(String message) {
        super(message); // æŠŠé”™è¯¯ä¿¡æ¯äº¤ç»™çˆ¶ç±»å¤„ç†
    }
}

// 2. ä¸šåŠ¡ä»£ç 
public class ExceptionDemo {
    public static void checkAge(int age) {
        if (age < 0 || age > 200) {
            // 3. è¿™é‡Œçš„ throw æ˜¯åŠ¨ä½œï¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡
            throw new AgeIllegalException("å¹´é¾„ä¸åˆæ³•ï¼æ€ä¹ˆå¯èƒ½æ˜¯ " + age + " å²ï¼Ÿ");
        }
        System.out.println("å¹´é¾„ç™»è®°æˆåŠŸï¼š" + age);
    }

    public static void main(String[] args) {
        try {
            checkAge(300); // æ•…æ„ä¼ å…¥é”™è¯¯å¹´é¾„
        } catch (Exception e) {
            e.printStackTrace(); // æ‰“å°æˆ‘ä»¬åœ¨ä¸Šé¢å†™çš„é”™è¯¯ä¿¡æ¯
        }
    }
}
```

---

### âš ï¸ ä¸¤ä¸ªå…³é”®å­—çš„åŒºåˆ« (é«˜é¢‘æ˜“æ··æ·†)

è¯·ä¸€å®šåœ¨ç¬”è®°é‡ŒæŠŠè¿™ä¸¤ä¸ªè¯åŒºåˆ†å¼€ï¼š

- â€‹**â€‹`throw`â€‹**â€‹ (åŠ¨è¯)ï¼šç”¨åœ¨â€‹**æ–¹æ³•å†…**ï¼Œåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡å¹¶æŠ›å‡ºã€‚

  - *ä¾‹å­ï¼š*  `throw new RuntimeException("é”™äº†");`
- â€‹**â€‹`throws`â€‹**â€‹ (åè¯/å£°æ˜)ï¼šç”¨åœ¨â€‹**æ–¹æ³•ç­¾åä¸Š**ï¼Œå£°æ˜è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šä¸¢å‡ºä»€ä¹ˆå¼‚å¸¸ã€‚

  - *ä¾‹å­ï¼š*  `public void method() throws Exception { ... }`

---

# æ³›å‹ï¼š

æ³›å‹ï¼ˆGenericsï¼‰æ˜¯ Java 5 å¼•å…¥çš„ç‰¹æ€§ï¼Œå®ƒæ˜¯ Java ç¼–ç¨‹ä¸­â€œå®‰å…¨â€å’Œâ€œè§„èŒƒâ€çš„åŸºçŸ³ã€‚ç®€å•æ¥è¯´ï¼Œâ€‹**æ³›å‹å°±æ˜¯ç»™ç±»æˆ–æ–¹æ³•è´´ä¸Šä¸€ä¸ªâ€œç±»å‹æ ‡ç­¾â€** ã€‚

---

### ğŸ·ï¸ 1. è®¤è¯†æ³›å‹ (Understanding Generics)

â€‹**æ ¸å¿ƒæ¦‚å¿µ**ï¼š

æ³›å‹æœ¬è´¨ä¸Šæ˜¯**å‚æ•°åŒ–ç±»å‹**ã€‚æˆ‘ä»¬åœ¨å®šä¹‰ç±»æˆ–æ–¹æ³•æ—¶ï¼Œä¸æŠŠæ•°æ®ç±»å‹å†™æ­»ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªå˜é‡ï¼ˆå¦‚ `<T>ã€<E>ã€<K> ã€<V>`ï¼‰æ¥ä»£æ›¿ï¼Œç­‰åˆ°çœŸæ­£ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šå…·ä½“ç±»å‹ã€‚

**ä¸ºä»€ä¹ˆè¦ç”¨æ³›å‹ï¼Ÿ**

1. **ç¼–è¯‘æ—¶æ£€æŸ¥**ï¼šåœ¨å†™ä»£ç æ—¶å°±èƒ½å‘ç°ç±»å‹é”™è¯¯ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¿è¡Œæ—¶æŠ¥ `ClassCastException`ï¼ˆç±»å‹è½¬æ¢å¼‚å¸¸ï¼‰ã€‚æ³›å‹æä¾›äº†åœ¨ç¼–è¯‘é˜¶æ®µçº¦æŸæ‰€èƒ½æ“ä½œçš„æ•°æ®ç±»å‹ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œæ£€æŸ¥çš„èƒ½åŠ›ï¼

1. â€‹**é¿å…å¼ºåˆ¶è½¬æ¢**â€‹ï¼šå–æ•°æ®æ—¶ä¸éœ€è¦æ‰‹åŠ¨ `(String)` å¼ºè½¬ï¼Œä»£ç æ›´å¹²å‡€ã€‚

**ä»£ç å¯¹æ¯”ï¼š**

Java

```
// âŒ æ²¡æœ‰æ³›å‹ï¼šä¸å®‰å…¨
ArrayList list = new ArrayList();
list.add("Java");
list.add(100); // å±…ç„¶èƒ½å­˜æ•´æ•°ï¼Œå¤ªä¹±äº†
String s = (String) list.get(1); // è¿è¡Œæ—¶æŠ¥é”™ï¼šClassCastException

// âœ… æœ‰äº†æ³›å‹ï¼šå®‰å…¨
ArrayList<String> list = new ArrayList<>();
list.add("Java");
// list.add(100); // ç¼–è¯‘ç›´æ¥æŠ¥é”™ï¼çº¢çº¿æç¤ºä½ 
String s = list.get(0); // ä¸éœ€è¦å¼ºè½¬
```

---

### ğŸ§± 2. æ³›å‹æ”¯æŒçš„ç±»å‹ (Supported Types)

è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é¢è¯•è€ƒç‚¹ï¼š

> **æ³›å‹ä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªæ”¯æŒå¼•ç”¨æ•°æ®ç±»å‹ã€‚**

- âŒ `ArrayList<int>`
- âŒ `ArrayList<double>`
- âœ… `ArrayList<Integer>`
- âœ… `ArrayList<Double>`

â€‹**åŸå› **ï¼š

Java çš„æ³›å‹æ˜¯**ä¼ªæ³›å‹**ï¼Œç¼–è¯‘åä¼šè¿›è¡Œ**ç±»å‹æ“¦é™¤**ï¼ˆType Erasureï¼‰ï¼Œæ‰€æœ‰çš„æ³›å‹ä¿¡æ¯éƒ½ä¼šè¢«æ“¦é™¤ä¸º `Object`â€‹ã€‚è€Œ `Object`â€‹ æ— æ³•å­˜å‚¨ `int`â€‹ è¿™ç§åŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨**åŒ…è£…ç±»**ã€‚object = intï¼Ÿæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚æ‰€ä»¥éœ€è¦é‡‡ç”¨åŒ…è£…ç±»ï¼Œjavaé€šè¿‡åŒ…è£…ç±»ï¼Œå°†åŸºæœ¬æ•°æ®ç±»å‹å°è£…ä¸ºobjectç±»ï¼ˆobjectæ˜¯æ‰€æœ‰ç±»çš„ç¥–å®—ç±»ï¼‰ã€‚

---

### ğŸ­ 3. æ³›å‹ç±» (Generic Class)

â€‹**å®šä¹‰**â€‹ï¼šåœ¨ç±»ååé¢è·Ÿä¸Š `<ç±»å‹å˜é‡>`ã€‚

â€‹**å¸¸ç”¨ç¬¦å·**â€‹ï¼š`T`â€‹ (Type), `E`â€‹ (Element), `K`â€‹ (Key), `V` (Value)ã€‚

â€‹**æ ¼å¼**ï¼š

Java

```java
// å®šä¹‰ä¸€ä¸ªå¯ä»¥å­˜ä»»ä½•ç±»å‹çš„ç›’å­
public class Box<T> {
    private T content;

    public void setContent(T content) {
        this.content = content;
    }

    public T getContent() {
        return content;
    }
}
```

â€‹**ä½¿ç”¨**ï¼š

Java

```java
// T å˜æˆäº† String
Box<String> stringBox = new Box<>();
stringBox.setContent("ç¤¼ç‰©");

// T å˜æˆäº† Integer
Box<Integer> intBox = new Box<>();
intBox.setContent(666);
```

---

### ğŸ”Œ 4. æ³›å‹æ¥å£ (Generic Interface)

â€‹**å®šä¹‰**â€‹ï¼šä¸æ³›å‹ç±»ç±»ä¼¼ï¼Œåœ¨æ¥å£åååŠ  `<E>`ã€‚

Java

```java
public interface Data<E> {
    void add(E e);
    E get(int index);
}
```

â€‹**å®ç°æ–¹å¼æœ‰ 2 ç§**ï¼š

1. â€‹**å®ç°ç±»ä¹Ÿä¸ç¡®å®šç±»å‹**ï¼ˆç»§ç»­æ³›å‹ï¼‰ï¼š
2. â€‹**å®ç°ç±»ç¡®å®šç±»å‹**ï¼ˆæŠŠæ³›å‹å®šæ­»ï¼‰ï¼š

---

### ğŸ”§ 5. æ³›å‹æ–¹æ³• (Generic Method)

â€‹**æ ¸å¿ƒåŒºåˆ«**ï¼š

æ³›å‹æ–¹æ³•å®šä¹‰çš„æ³›å‹ç±»å‹ï¼Œâ€‹**åªåœ¨å½“å‰æ–¹æ³•æœ‰æ•ˆ**ã€‚å®ƒç”šè‡³å¯ä»¥åœ¨ä¸€ä¸ªæ™®é€šç±»ï¼ˆéæ³›å‹ç±»ï¼‰ä¸­å®šä¹‰ã€‚

â€‹**æ ¼å¼**â€‹ï¼šâ€‹ **â€‹`<T>`â€‹** â€‹ **å¿…é¡»æ”¾åœ¨è¿”å›å€¼ç±»å‹ä¹‹å‰**ã€‚

Java

```java
public class Test {
    // è¿™æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•
    // <T> å£°æ˜è¿™æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼ŒT æ˜¯å‚æ•°ç±»å‹ï¼Œvoid æ˜¯è¿”å›å€¼
    public <T> void printArray(T[] arr) {
        for (T t : arr) {//å¼ºåŒ–forå¾ªç¯
            System.out.println(t);
        }
    }
}
```

---

### ğŸƒ 6. é€šé…ç¬¦ä¸ä¸Šä¸‹é™ (Wildcards & Bounds)

è¿™æ˜¯æ³›å‹ä¸­æœ€éš¾ç†è§£çš„éƒ¨åˆ†ï¼Œä¸»è¦è§£å†³ `List<Object>`â€‹ ä¸æ˜¯ `List<String>` çš„çˆ¶ç±»çš„é—®é¢˜ã€‚ï¼ˆè¯´äººè¯å°±æ˜¯æˆ‘æœ‰ä¸¤ä¸ªç±»ï¼Œæˆ‘æƒ³è¦è£…è¿™ä¸¤ä¸ªç±»çš„ArrayList<t>,ä½†æ˜¯æˆ‘æƒ³ç”¨çˆ¶ç±»carå»æ¥æ”¶,è¿™æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚æ‰€ä»¥å°±ç”¨é€šé…ç¬¦å’Œä¸Šä¸‹é™å»è§£å†³æˆ‘è¦å»è£…è‡ªå®šä¹‰ç±»çš„æƒ…å†µã€‚ï¼‰

#### 1. é€šé…ç¬¦ `?`

ä»£è¡¨â€œä»»æ„ç±»å‹â€ã€‚é€šå¸¸ç”¨äº**æ–¹æ³•çš„å‚æ•°**ä¸­ã€‚

Java

```
// å¯ä»¥æ¥æ”¶ ArrayList<String> ä¹Ÿå¯ä»¥æ¥æ”¶ ArrayList<Integer>
public void go(ArrayList<?> list){
}
```

#### 2. ä¸Šé™ (extends)

- â€‹**æ ¼å¼**â€‹ï¼š`? extends Car`
- â€‹**å«ä¹‰**â€‹ï¼šåªèƒ½æ¥æ”¶ `Car`â€‹ æˆ–è€… `Car`â€‹ çš„â€‹**å­ç±»**ã€‚
- â€‹**ä½œç”¨**ï¼šé™å®šäº†â€œå¤©èŠ±æ¿â€ã€‚

#### 3. ä¸‹é™ (super)

- â€‹**æ ¼å¼**â€‹ï¼š`? super Car`
- â€‹**å«ä¹‰**â€‹ï¼šåªèƒ½æ¥æ”¶ `Car`â€‹ æˆ–è€… `Car`â€‹ çš„â€‹**çˆ¶ç±»**ã€‚
- â€‹**ä½œç”¨**ï¼šé™å®šäº†â€œåœ°æ¿â€ã€‚

#### âš ï¸ ä¸€ä¸ªç®€å•çš„è®°å¿†æŠ€å·§

- â€‹**â€‹`ArrayList<Object>`â€‹** â€‹ **å’Œ** **â€‹`ArrayList<String>`â€‹** â€‹ **æ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼**  å®ƒä»¬æ˜¯åŠæ¯›é’±å…³ç³»éƒ½æ²¡æœ‰çš„ä¸¤ä¸ªç±»ã€‚
- å¦‚æœæƒ³è®©ä¸€ä¸ªæ–¹æ³•èƒ½åŒæ—¶å¤„ç†å®ƒä»¬ï¼Œå¿…é¡»ç”¨é€šé…ç¬¦ `?`ã€‚

### ğŸ’¡ æ€»ç»“ç¬”è®°

1. â€‹**æœ¬è´¨**ï¼šç»™ä»£ç åŠ æ ‡ç­¾ï¼Œä¸ºäº†ç¼–è¯‘å®‰å…¨ã€‚
2. â€‹**ç±»å‹**â€‹ï¼šåªèƒ½ç”¨å¼•ç”¨ç±»å‹ (`Integer`â€‹), ä¸èƒ½ç”¨åŸºæœ¬ç±»å‹ (`int`)ã€‚
3. â€‹**å®šä¹‰**â€‹ï¼šç±» `<T>`â€‹, æ¥å£ `<E>`â€‹, æ–¹æ³• `public <T> void ...`ã€‚
4. **é€šé…ç¬¦**ï¼š`?`â€‹ ä»£è¡¨ä¸€åˆ‡ï¼Œ`extends`â€‹ è§„å®šä¸Šé™ï¼Œ`super` è§„å®šä¸‹é™ã€‚
5. **åŒ…è£…ç±»ï¼š**

|åŸºæœ¬æ•°æ®ç±»å‹|å¯¹åº”çš„åŒ…è£…ç±»ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹ï¼‰|
| --------------| ------------------------------|
|byte|Byte|
|short|Short|
|int|Integer|
|long|Long|
|char|Character|
|float|Float|
|double|Double|
|boolean|Boolean|

```java
package com.itheima.demo4genericity;

import java.util.ArrayList;

public class GenericDemo5 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šç†è§£é€šé…ç¬¦å’Œä¸Šä¸‹é™ã€‚
        ArrayList<Xiaomi> xiaomis = new ArrayList<>();
        xiaomis.add(new Xiaomi());
        xiaomis.add(new Xiaomi());
        xiaomis.add(new Xiaomi());
        go(xiaomis);

        ArrayList<BYD> byds = new ArrayList<>();
        byds.add(new BYD());
        byds.add(new BYD());
        byds.add(new BYD());
        go(byds);

//        ArrayList<Dog> dogs = new ArrayList<>();
//        dogs.add(new Dog());
//        dogs.add(new Dog());
//        dogs.add(new Dog());
//        go(dogs);
    }

    // éœ€æ±‚ï¼šå¼€å‘ä¸€ä¸ªæå“é£è½¦çš„æ¸¸æˆã€‚
    // è™½ç„¶Xiaomiå’ŒBYDæ˜¯Carçš„å­ç±»ï¼Œä½†æ˜¯ ArrayList<Xiaomi>  ArrayList<BYD>å’Œ ArrayList<Car> æ˜¯æ²¡æœ‰åŠæ¯›é’±å…³ç³»ï¼
    public static void go(ArrayList<? extends Car> cars) {
    }
}

```

---

```java
package com.itheima.demo5genericity;

import java.util.ArrayList;

public class GenericDemo6 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šææ¸…æ¥šæ³›å‹å’Œé›†åˆä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªèƒ½æ”¯æŒå¯¹è±¡ç±»å‹ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹ï¼‰ã€‚
        // ArrayList<int> list = new ArrayList<>();
        // æ³›å‹æ“¦é™¤ï¼šæ³›å‹å·¥ä½œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç­‰ç¼–è¯‘åæ³›å‹å°±æ²¡ç”¨äº†ï¼Œæ‰€ä»¥æ³›å‹åœ¨ç¼–è¯‘åéƒ½ä¼šè¢«æ“¦é™¤ã€‚æ‰€æœ‰ç±»å‹ä¼šæ¢å¤æˆObjectç±»å‹

        // æŠŠåŸºæœ¬æ•°æ®ç±»å‹å˜æˆåŒ…è£…ç±»å¯¹è±¡ã€‚
        // æ‰‹å·¥åŒ…è£…:
        // Integer i = new Integer(100); // è¿‡æ—¶
        Integer it1 = Integer.valueOf(100);  // æ¨èçš„
        Integer it2 = Integer.valueOf(100);  // æ¨èçš„
        System.out.println(it1 == it2);

        // è‡ªåŠ¨è£…ç®±æˆå¯¹è±¡ï¼šåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®å¯ä»¥ç›´æ¥å˜æˆåŒ…è£…å¯¹è±¡çš„æ•°æ®ï¼Œä¸éœ€è¦é¢å¤–åšä»»ä½•äº‹æƒ…
        Integer it11 = 130;
        Integer it22 = 130;
        System.out.println(it11 == it22);

        // è‡ªåŠ¨æ‹†ç®±ï¼šæŠŠåŒ…è£…ç±»å‹çš„å¯¹è±¡ç›´æ¥ç»™åŸºæœ¬ç±»å‹çš„æ•°æ®
        int i = it11;
        System.out.println(i);

        ArrayList<Integer> list = new ArrayList<>();
        list.add(130);  // è‡ªåŠ¨è£…ç®±
        list.add(120);  // è‡ªåŠ¨è£…ç®±
        int rs = list.get(1); // è‡ªåŠ¨æ‹†ç®±

        System.out.println("-----------------------------------------------------------------------");

        // åŒ…è£…ç±»æ–°å¢çš„åŠŸèƒ½ï¼š
        // 1ã€æŠŠåŸºæœ¬ç±»å‹çš„æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚
        int j = 23;
        String rs1 = Integer.toString(j);   // "23"
        System.out.println(rs1 + 1); // 231

        Integer i2 = j;
        String rs2 = i2.toString(); // "23"
        System.out.println(rs2 + 1 ); // 231

        String rs3 = j + "";
        System.out.println(rs3 + 1 ); // 231

        System.out.println("-----------------------------------------------------------------------");

        // 2ã€æŠŠå­—ç¬¦ä¸²æ•°å€¼è½¬æ¢æˆå¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¾ˆæœ‰ç”¨ï¼‰ã€‚
        String str = "98";
        // int i1 = Integer.parseInt(str);
        int i1 = Integer.valueOf(str);
        System.out.println(i1 + 2);

        String str2 = "98.8";
//        double d = Double.parseDouble(str2);
        double d = Double.valueOf(str2);
        System.out.println(d + 2);
    }
}

```

---

# é›†åˆæ¡†æ¶ï¼š

---

### ğŸ“¦ 1. è®¤è¯†é›†åˆ (Introduction)

**ä»€ä¹ˆæ˜¯é›†åˆï¼Ÿ**

é›†åˆæ˜¯ Java æä¾›çš„ä¸€ç§â€‹**å®¹å™¨**ï¼Œç”¨æ¥å­˜å‚¨å¤šä¸ªæ•°æ®ã€‚

**æ ¸å¿ƒè€ƒç‚¹ï¼šé›†åˆ vs æ•°ç»„**

|**ç‰¹æ€§**|**æ•°ç»„ (Array)**|**é›†åˆ (Collection)**||||
| --| ----------------------| --------------------------------| --| --| --|
|**é•¿åº¦**|**å›ºå®šä¸å¯å˜**|**å¯å˜**(è‡ªåŠ¨æ‰©å®¹)||||
|**å­˜å‚¨å†…å®¹**|åŸºæœ¬ç±»å‹ æˆ– å¼•ç”¨ç±»å‹|**åªèƒ½å­˜å¼•ç”¨ç±»å‹**(intè¦å˜Integer)||||
|**é€‚ç”¨åœºæ™¯**|æ•°æ®ä¸ªæ•°ç¡®å®šæ—¶|æ•°æ®ä¸ªæ•°ä¸ç¡®å®šï¼Œæˆ–éœ€é¢‘ç¹å¢åˆ æ—¶||||

**é›†åˆä½“ç³»å›¾è§£ (ç®€åŒ–ç‰ˆ)ï¼š**

Java é›†åˆä¸»è¦åˆ†ä¸ºä¸¤å¤§æ´¾ç³»ï¼š

1. â€‹**Collection (å•åˆ—é›†åˆ)** ï¼šä¸€ä¸ªä¸€ä¸ªåœ°å­˜æ•°æ®ã€‚

   - â€‹`List` (æœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•)ã€æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥æœ‰åºä¸”å¯é‡å¤ã€‚ç±»ä¼¼äºæ•°ç»„ã€‚ã€‘
   - â€‹`Set` (æ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•)ã€æ— ç´¢å¼•ï¼Œæ‰€ä»¥æ— åºä¸”ä¸å¯é‡å¤ã€‚ã€‘
2. â€‹**Map (åŒåˆ—é›†åˆ)** ï¼šä¸€å¯¹ä¸€å¯¹åœ°å­˜æ•°æ® (Key-Value)ã€‚

---

### ğŸ› ï¸ 2. Collection çš„åŠŸèƒ½ (Common Methods)

â€‹`Collection<E>`â€‹ æ˜¯æ‰€æœ‰å•åˆ—é›†åˆï¼ˆList å’Œ Setï¼‰çš„â€‹**é¡¶å±‚æ¥å£**ã€‚å®ƒé‡Œé¢å®šä¹‰çš„æ–¹æ³•ï¼Œæ˜¯æ‰€æœ‰å•åˆ—é›†åˆé€šç”¨çš„ã€‚

**å¸¸ç”¨ API é€ŸæŸ¥è¡¨ï¼š**

|**æ–¹æ³•å**|**è¯´æ˜**|**ç¤ºä¾‹**||||
| ------| --------------| ------------------------------------| --| --| --|
|â€‹`add(E e)`|æ·»åŠ å…ƒç´ |â€‹`coll.add("Java");`(Listæ€»è¿”å›trueï¼ŒSetå¯èƒ½false)||||
|â€‹`clear()`|æ¸…ç©ºé›†åˆ|â€‹`coll.clear();`||||
|â€‹`remove(E e)`|åˆ é™¤æŒ‡å®šå…ƒç´ |â€‹`coll.remove("Java");`(åˆ é™¤æˆåŠŸè¿”å› true)||||
|â€‹`contains(E e)`|åˆ¤æ–­æ˜¯å¦åŒ…å«|â€‹`coll.contains("Java");`||||
|â€‹`isEmpty()`|åˆ¤æ–­æ˜¯å¦ä¸ºç©º|â€‹`coll.isEmpty();`||||
|â€‹`size()`|è·å–å…ƒç´ ä¸ªæ•°|â€‹`coll.size();`||||
|â€‹`toArray()`|è½¬æˆæ•°ç»„|â€‹`Object[] arr = coll.toArray();`||||

> **æ³¨æ„**ï¼šCollection æ¥å£ä¸­**æ²¡æœ‰**æ ¹æ®ç´¢å¼•æ“ä½œçš„æ–¹æ³•ï¼ˆå¦‚ `get(i)`ï¼‰ï¼Œå› ä¸º Set é›†åˆæ˜¯æ²¡æœ‰ç´¢å¼•çš„ã€‚

```java
package com.itheima.demo6collection;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.function.IntFunction;

public class CollectionDemo2 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šææ¸…æ¥šCollectionæä¾›çš„é€šç”¨é›†åˆåŠŸèƒ½ã€‚
        Collection<String> list = new ArrayList<>();

        // æ·»åŠ å…ƒç´ 
        list.add("å¼ ä¸‰");
        list.add("æå››");
        list.add("ç‹äº”");
        System.out.println(list); // [å¼ ä¸‰, æå››, ç‹äº”]

        // è·å–é›†åˆçš„å…ƒç´ ä¸ªæ•°
        System.out.println(list.size());

        // åˆ é™¤é›†åˆå…ƒç´ 
        list.remove("æå››");
        System.out.println(list);

        // åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º
        System.out.println(list.isEmpty()); // false

        // æ¸…ç©ºé›†åˆ
        // list.clear();
        // System.out.println(list);

        // åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ•°æ®
        System.out.println(list.contains("å¼ ä¸‰"));

        // æŠŠé›†åˆè½¬æ¢æˆæ•°ç»„
        Object[] arr = list.toArray();
        System.out.println(Arrays.toString(arr));

        // æŠŠé›†åˆè½¬æ¢æˆå­—ç¬¦ä¸²æ•°ç»„(æ‹“å±•)
        String[] arr2 = list.toArray(String[]::new);
    }
}

```

# Collectionçš„éå†æ–¹å¼ï¼š

## è¿­ä»£å™¨éå†ï¼š

- è¿­ä»£å™¨æ˜¯ç”¨æ¥éå†é›†åˆçš„ä¸“ç”¨æ–¹å¼(æ•°ç»„æ²¡æœ‰è¿­ä»£å™¨)ï¼Œåœ¨Javaä¸­è¿­ä»£å™¨çš„ä»£è¡¨æ˜¯Iteratorã€‚
- #### Collectioné›†åˆè·å–è¿­ä»£å™¨çš„æ–¹æ³•:

  |æ–¹æ³•åç§°|è¯´æ˜|
  | ---------------------| -------------------------------------------------------------------------------------------|
  |Iterator\<E\>**iterator()**|è¿”å›é›†åˆä¸­çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥è¿­ä»£å™¨å¯¹è±¡é»˜è®¤æŒ‡å‘å½“å‰é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ (é»˜è®¤æŒ‡å‘å½“å‰é›†åˆçš„ç´¢å¼•0)|
- #### Iteratorè¿­ä»£å™¨ä¸­çš„å¸¸ç”¨æ–¹æ³•:

  |æ–¹æ³•åç§°|è¯´æ˜|
  | -------------------| -----------------------------------------------------------|
  |boolean hasNext()|è¯¢é—®å½“å‰ä½ç½®æ˜¯å¦æœ‰å…ƒç´ å­˜åœ¨ï¼Œå­˜åœ¨è¿”å›true ,ä¸å­˜åœ¨è¿”å›false|
  |E next()|è·å–å½“å‰ä½ç½®çš„å…ƒç´ ï¼Œå¹¶åŒæ—¶å°†è¿­ä»£å™¨å¯¹è±¡æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ å¤„ã€‚|
- #### 2ã€é€šè¿‡è¿­ä»£å™¨è·å–é›†åˆçš„å…ƒç´ ï¼Œå¦‚æœå–å…ƒç´ è¶Šç•Œä¼šå‡ºç°ä»€ä¹ˆå¼‚å¸¸?

  ä¼šå‡ºç°NoSuchElementExceptionå¼‚å¸¸ã€‚

```java
package com.itheima.demo6collection;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class CollectionTraversalDemo3 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šæŒæ¡Collectionçš„éå†æ–¹å¼ä¸€ï¼šè¿­ä»£å™¨éå†
        ArrayList<String> names = new ArrayList<>();
        names.add("å¼ æ— å¿Œ");
        names.add("ç„å†¥äºŒè€");
        names.add("å®‹é’ä¹¦");
//        names.add("æ®·ç´ ç´ ");
        System.out.println(names); // [å¼ æ— å¿Œ, ç„å†¥äºŒè€, å®‹é’ä¹¦]
        //                                                      it

        // 1ã€å¾—åˆ°è¿™ä¸ªé›†åˆçš„è¿­ä»£å™¨å¯¹è±¡
        Iterator<String> it = names.iterator();
//        System.out.println(it.next());
//        System.out.println(it.next());
//        System.out.println(it.next());
//        System.out.println(it.next());
//        System.out.println(it.next()); // NoSuchElementException

        // 2ã€ä½¿ç”¨ä¸€ä¸ªwhileå¾ªç¯æ¥éå†
        while (it.hasNext()) {
            String name = it.next();
            System.out.println(name);
        }
    }
}

```

## å¢å¼ºFORå¾ªç¯ï¼š

- FORå¾ªç¯æ ¼å¼ï¼š

- ```java
  for (å…ƒç´ çš„æ•°æ®ç±»å‹ å˜é‡å : æ•°ç»„æˆ–è€…é›†åˆ) { 
  }
  ```
- **å¢å¼ºforå¯ä»¥ç”¨æ¥éå†é›†åˆæˆ–è€…æ•°ç»„ã€‚
  å¢å¼ºforéå†é›†åˆï¼Œæœ¬è´¨å°±æ˜¯è¿­ä»£å™¨éå†é›†åˆçš„ç®€åŒ–å†™æ³•ã€‚**
- ## æ¡ˆä¾‹ï¼š

```java
package com.itheima.demo6collection;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class CollectionTraversalDemo4 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šæŒæ¡Collectionçš„éå†æ–¹å¼äºŒï¼šå¢å¼ºfor
        Collection<String> names = new ArrayList<>();
        names.add("å¼ æ— å¿Œ");
        names.add("ç„å†¥äºŒè€");
        names.add("å®‹é’ä¹¦");
        names.add("æ®·ç´ ç´ ");

        for (String name : names) {
            System.out.println(name);
        }

        String[] users = {"å¼ æ— å¿Œ", "ç„å†¥äºŒè€", "å®‹é’ä¹¦", "æ®·ç´ ç´ "};

        for (String user : users) {
            System.out.println(user);
        }
    }
}

```

## Lambdaï¼š

```java
package com.itheima.demo6collection;

import java.util.ArrayList;
import java.util.Collection;
import java.util.function.Consumer;

public class CollectionTraversalDemo5 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šæŒæ¡Collectionçš„éå†æ–¹å¼ä¸‰ï¼šlambda
        Collection<String> names = new ArrayList<>();
        names.add("å¼ æ— å¿Œ");
        names.add("ç„å†¥äºŒè€");
        names.add("å®‹é’ä¹¦");
        names.add("æ®·ç´ ç´ ");


//        names.forEach(new Consumer<String>() {
//            @Override
//            public void accept(String s) {
//                System.out.println(s);
//            }
//        });

//        names.forEach(s -> System.out.println(s));
//@FunctionalInterface   consumer æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæ‰€ä»¥é‡‡ç”¨lambdaè¡¨è¾¾å¼ç®€åŒ–ï¼ŒåŒæ—¶æ˜¯
// 1. Lambda æ ‡å‡†å†™æ³•
// System.out æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ PrintStream å¯¹è±¡
//list.forEach(s -> System.out.println(s));
//public interface Consumer<T> {}
        names.forEach(System.out::println);
    }
}

```

# å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜ï¼š

- éå†é›†åˆçš„åŒæ—¶åˆå­˜åœ¨å¢åˆ é›†åˆå…ƒç´ çš„è¡Œä¸ºæ—¶å¯èƒ½å‡ºç°ä¸šåŠ¡å¼‚å¸¸ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¹‹ä¸ºå¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜ã€‚

```java
package com.itheima.demo6collection;

import java.util.ArrayList;
import java.util.Iterator;

public class CollectionTraversalTest6 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šè®¤è¯†å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜ï¼Œææ¸…æ¥šæ¯ç§éå†çš„åŒºåˆ«
        ArrayList<String> list = new ArrayList<>();
        list.add("Javaå…¥é—¨");
        list.add("å®å¤æ¸æ");
        list.add("é»‘æ¸æ");
        list.add("äººå­—æ‹–");
        list.add("ç‰¹çº§æ¸æ");
        list.add("æ¸æå­");
        list.add("è¥¿æ´‹å‚");
        System.out.println(list);

        // éœ€æ±‚1ï¼šåˆ é™¤å…¨éƒ¨æ¸æ
        for (int i = 0; i < list.size(); i++) {
            String name = list.get(i);
            if(name.contains("æ¸æ")){
                list.remove(name);
            }
        }
        System.out.println(list);   //å‡ºç°å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜ã€‚
        // [Javaå…¥é—¨, å®å¤æ¸æ, é»‘æ¸æ, äººå­—æ‹–, ç‰¹çº§æ¸æ, æ¸æå­, è¥¿æ´‹å‚]
        // [Javaå…¥é—¨, é»‘æ¸æ, äººå­—æ‹–, æ¸æå­, è¥¿æ´‹å‚]
        //           i
        // [Javaå…¥é—¨, é»‘æ¸æ, äººå­—æ‹–, æ¸æå­, è¥¿æ´‹å‚]

        System.out.println("=====================================================");

        ArrayList<String> list2 = new ArrayList<>();
        list2.add("Javaå…¥é—¨");
        list2.add("å®å¤æ¸æ");
        list2.add("é»‘æ¸æ");
        list2.add("äººå­—æ‹–");
        list2.add("ç‰¹çº§æ¸æ");
        list2.add("æ¸æå­");
        list2.add("è¥¿æ´‹å‚");
        System.out.println(list2);

        // éœ€æ±‚1ï¼šåˆ é™¤å…¨éƒ¨æ¸æ
        for (int i = 0; i < list2.size(); i++) {
            String name = list2.get(i);
            if(name.contains("æ¸æ")){
                list2.remove(name);
                i--; // è§£å†³æ–¹æ¡ˆ1ï¼šåˆ é™¤æ•°æ®ååšä¸€æ­¥i--æ“ä½œ ï¼ˆå‰ææ˜¯æ”¯æŒç´¢å¼•ï¼‰
            }
        }
        // [Javaå…¥é—¨, å®å¤æ¸æ, é»‘æ¸æ, äººå­—æ‹–, ç‰¹çº§æ¸æ, æ¸æå­, è¥¿æ´‹å‚]
        // [Javaå…¥é—¨, äººå­—æ‹–,  è¥¿æ´‹å‚]
        //                  i
        System.out.println(list2);

        System.out.println("=====================================================");

        ArrayList<String> list3 = new ArrayList<>();
        list3.add("Javaå…¥é—¨");
        list3.add("å®å¤æ¸æ");
        list3.add("é»‘æ¸æ");
        list3.add("äººå­—æ‹–");
        list3.add("ç‰¹çº§æ¸æ");
        list3.add("æ¸æå­");
        list3.add("è¥¿æ´‹å‚");
        System.out.println(list3);

        // éœ€æ±‚1ï¼šåˆ é™¤å…¨éƒ¨æ¸æ
        // è§£å†³æ–¹æ¡ˆ2ï¼šå€’ç€éå†å¹¶åˆ é™¤ï¼ˆå‰ææ˜¯æ”¯æŒç´¢å¼•ï¼‰
        for (int i = list3.size() - 1; i >= 0; i--) {
            String name = list3.get(i);
            if(name.contains("æ¸æ")){
                list3.remove(name);
            }
        }
        // [Javaå…¥é—¨, äººå­—æ‹–, è¥¿æ´‹å‚]
        //     i
        System.out.println(list3);

        System.out.println("=====================================================");
        ArrayList<String> list4 = new ArrayList<>();
        list4.add("Javaå…¥é—¨");
        list4.add("å®å¤æ¸æ");
        list4.add("é»‘æ¸æ");
        list4.add("äººå­—æ‹–");
        list4.add("ç‰¹çº§æ¸æ");
        list4.add("æ¸æå­");
        list4.add("è¥¿æ´‹å‚");
        System.out.println(list4);

        // éœ€æ±‚1ï¼šåˆ é™¤å…¨éƒ¨æ¸æ
        // æ–¹æ¡ˆä¸€ï¼šè¿­ä»£å™¨éå†å¹¶åˆ é™¤é»˜è®¤ä¹Ÿå­˜åœ¨å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜ã€‚
        // å¯ä»¥è§£å†³ï¼Œè§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨è¿­ä»£å™¨è‡ªå·±çš„æ–¹æ³•æ¥åˆ é™¤
        Iterator<String> it = list4.iterator();
        while(it.hasNext()){
            String name = it.next();
            if(name.contains("æ¸æ")){
                it.remove();   // å¯ä»¥è§£å†³ è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨è¿­ä»£å™¨è‡ªå·±çš„æ–¹æ³•æ¥åˆ é™¤å½“å‰æ•°æ®
            }
        }
        System.out.println(list4);

        System.out.println("=====================================================");

        ArrayList<String> list5 = new ArrayList<>();
        list5.add("Javaå…¥é—¨");
        list5.add("å®å¤æ¸æ");
        list5.add("é»‘æ¸æ");
        list5.add("äººå­—æ‹–");
        list5.add("ç‰¹çº§æ¸æ");
        list5.add("æ¸æå­");
        list5.add("è¥¿æ´‹å‚");
        System.out.println(list5);

        // éœ€æ±‚1ï¼šåˆ é™¤å…¨éƒ¨æ¸æ
        // æ–¹æ¡ˆäºŒå’Œä¸‰ï¼šç”¨å¢å¼ºforè¿˜æœ‰Lambda(éƒ½æ²¡æœ‰åŠæ³•è§£å†³å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜)
        // ç»“è®ºï¼šå¢å¼ºforå’ŒLambdaåªé€‚åˆåšéå†ï¼Œä¸é€‚åˆåšéå†å¹¶ä¿®æ”¹æ“ä½œ
//        for (String s : list5) {
//            if(s.contains("æ¸æ")){
//                list5.remove(s);
//            }
//        }

        // Lambda
//        list5.forEach(s -> {
//            if(s.contains("æ¸æ")){
//                list5.remove(s);
//            }
//        });
        System.out.println(list5);
    }
}

```

- ## è§£å†³å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜çš„æ–¹æ¡ˆ:

  **å¦‚æœé›†åˆæ”¯æŒç´¢å¼•**ï¼Œå¯ä»¥ä½¿ç”¨forå¾ªç¯éå†ï¼Œæ¯åˆ é™¤æ•°æ®ååši--ï¼›æˆ–è€…å¯ä»¥å€’ç€éå†  
  å¯ä»¥ä½¿ç”¨**è¿­ä»£å™¨éå†**ï¼Œå¹¶ç”¨è¿­ä»£å™¨æä¾›çš„åˆ é™¤æ–¹æ³•åˆ é™¤æ•°æ®ã€‚
- ## **æ³¨æ„!** ï¼š

  å¢å¼ºforå¾ªç¯/Lambdaéå†å‡**ä¸èƒ½è§£å†³**å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜ï¼Œå› æ­¤å¢å®ƒä»¬åªé€‚åˆåšæ•°æ®çš„éå†ï¼Œä¸é€‚åˆåŒæ—¶åšå¢åˆ æ“ä½œã€‚

---

### ğŸ“œ 3. List é›†åˆ (List Interface)

> Collection List å’ŒMapéƒ½æ˜¯æ¥å£ï¼ŒArrayListå’ŒLinkedListéƒ½æ˜¯å®ç°ç±»

**List çš„ä¸‰å¤§ç‰¹å¾ (èƒŒè¯µå…¨æ–‡)ï¼š**

1. **æœ‰åº** (Ordered)ï¼šå­˜è¿›å»æ˜¯ä»€ä¹ˆé¡ºåºï¼Œå–å‡ºæ¥å°±æ˜¯ä»€ä¹ˆé¡ºåºã€‚
2. **æœ‰ç´¢å¼•** (Indexed)ï¼šå¯ä»¥é€šè¿‡ä¸‹æ ‡ `index` ç²¾ç¡®æ“ä½œå…ƒç´ ã€‚
3. **å¯é‡å¤** (Duplicates)ï¼šå…è®¸å­˜å‚¨ç›¸åŒçš„å…ƒç´ ã€‚

**List ç‹¬æœ‰çš„æ–¹æ³• (å› ä¸ºæœ‰ç´¢å¼•)ï¼š**

List ç»§æ‰¿äº† Collection çš„å…¨éƒ¨æ–¹æ³•ï¼Œè¿˜å¢åŠ äº†ä¸€å¥—**å¸¦ç´¢å¼•**çš„æ–¹æ³•ï¼š

- â€‹`void add(int index, E element)`: æ’é˜Ÿï¼Œåœ¨æŒ‡å®šä½ç½®æ’å…¥ã€‚
- â€‹`E remove(int index)`: åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ çš„å…ƒç´ ã€‚
- â€‹`E set(int index, E element)`: ä¿®æ”¹æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œè¿”å›ä¿®æ”¹å‰çš„æ—§å€¼ã€‚
- â€‹`E get(int index)`â€‹: **æœ€å¸¸ç”¨**ï¼Œè·å–æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚

- |æ–¹æ³•åç§°|è¯´æ˜|
  | -----------------------------| ----------------------------------------|
  |void add(intindex,Eelement)|åœ¨æ­¤é›†åˆä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ |
  |E remove(int index)|åˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ |
  |E set(intindex,Eelement)|ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«ä¿®æ”¹çš„å…ƒç´ |
  |E get(int index)|è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ |

---

### âš”ï¸ 4. List çš„ä¸¤ä¸ªä¸»è¦å®ç°ç±» (ArrayList vs LinkedList)

è¿™æ˜¯é¢è¯•å¿…è€ƒçš„å¯¹æ¯”é¢˜ï¼Œä¸»è¦è€ƒåº•å±‚æ•°æ®ç»“æ„ã€‚

#### A. ArrayList (åŠ¨æ€æ•°ç»„) ğŸ”¥ *æœ€å¸¸ç”¨*

- â€‹**åº•å±‚**â€‹ï¼šâ€‹**æ•°ç»„**ã€‚
- â€‹**ç‰¹ç‚¹**ï¼š

  - â€‹**æŸ¥è¯¢å¿«**ï¼šæœ‰ç´¢å¼•ï¼Œç›´æ¥å®šä½ã€‚
  - â€‹**å¢åˆ æ…¢**ï¼šå¦‚æœåœ¨ä¸­é—´æ’å…¥æˆ–åˆ é™¤ï¼Œåé¢çš„å…ƒç´ éƒ½éœ€è¦æ•´ä½“æŒªåŠ¨ä½ç½®ã€‚
- â€‹**åœºæ™¯**ï¼šè¯»å¤šå†™å°‘ï¼ˆç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼‰ã€‚

#### B. LinkedList (åŒå‘é“¾è¡¨)

- â€‹**åº•å±‚**â€‹ï¼šâ€‹**åŒå‘é“¾è¡¨**ã€‚
- â€‹**ç‰¹ç‚¹**ï¼š

  - â€‹**æŸ¥è¯¢æ…¢**ï¼šæ¯æ¬¡éƒ½è¦ä»å¤´æˆ–å°¾ä¸€ä¸ªä¸€ä¸ªæ‰¾ã€‚
  - â€‹**å¢åˆ å¿«**ï¼šåªéœ€è¦æ–­å¼€å’Œè¿æ¥æŒ‡é’ˆï¼Œä¸éœ€è¦æŒªåŠ¨å…¶ä»–å…ƒç´ ï¼ˆå°¤å…¶æ˜¯é¦–å°¾æ“ä½œæå¿«ï¼‰ã€‚
- â€‹**åœºæ™¯**ï¼šéœ€è¦é¢‘ç¹åœ¨é¦–å°¾å¢åˆ å…ƒç´ ï¼ˆå¦‚å®ç°æ ˆæˆ–é˜Ÿåˆ—ï¼‰ã€‚

---

## 	**ArrayList**å’Œ**LinkedList**çš„åº•å±‚åŸç†ï¼ˆç»“åˆæºç åˆ†æï¼‰

- ---

  ### 1. ArrayList æºç æ·±åº¦å‰–æ

  â€‹**æ ¸å¿ƒæœ¬è´¨**â€‹ï¼šArrayList çš„å¤–å£³æ˜¯ä¸€ä¸ª `List`â€‹ï¼Œä½†å‰¥å¼€å¤–å£³ï¼Œå®ƒçš„å†…æ ¸å°±æ˜¯ä¸€ä¸ª**å¯¹è±¡æ•°ç»„** `Object[]`ã€‚

  #### A. æ ¸å¿ƒæˆå‘˜å˜é‡ (æˆå‘˜)

  Java

  ```
  public class ArrayList<E> extends AbstractList<E> ... {
      // 1. åº•å±‚çœŸæ­£å­˜æ•°æ®çš„æ•°ç»„
      // transient è¡¨ç¤ºè¯¥å­—æ®µä¸å‚ä¸é»˜è®¤åºåˆ—åŒ–
      transient Object[] elementData; 

      // 2. é›†åˆçš„å¤§å°ï¼ˆå®é™…è£…äº†å¤šå°‘ä¸ªå…ƒç´ ï¼‰
      private int size;

      // 3. é»˜è®¤åˆå§‹å®¹é‡å¸¸é‡ = 10
      private static final int DEFAULT_CAPACITY = 10;

      // 4. ç©ºæ•°ç»„å¸¸é‡ï¼ˆç”¨äºæ‡’åŠ è½½ï¼‰
      private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};
  }
  ```

  #### B. æ„é€ å™¨ (æ‡’åŠ è½½æœºåˆ¶)

  é¢è¯•é«˜é¢‘ç‚¹ï¼š**new ArrayList() çš„æ—¶å€™ï¼Œæ•°ç»„é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ**

  - â€‹**JDK 1.7**ï¼šç›´æ¥åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 10 çš„æ•°ç»„ã€‚
  - â€‹**JDK 1.8**â€‹ï¼šåˆ›å»ºä¸€ä¸ªâ€‹**ç©ºæ•°ç»„**â€‹ã€‚åªæœ‰å½“ç¬¬ä¸€æ¬¡ `add` æ•°æ®æ—¶ï¼Œæ‰å˜æˆ 10ã€‚

  Java

  ```
  // JDK 1.8 æºç 
  public ArrayList() {
      // åˆšåˆ›å»ºæ—¶ï¼Œåªæ˜¯æŠŠç©ºæ•°ç»„èµ‹å€¼ç»™ elementDataï¼Œæ­¤æ—¶é•¿åº¦ä¸º 0
      this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
  }
  ```

  #### C. add æ–¹æ³•ä¸æ‰©å®¹ (æœ€æ ¸å¿ƒ)

  å½“ä½ è°ƒç”¨ `list.add("A")` æ—¶ï¼Œå†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

  Java

  ```
  public boolean add(E e) {
      // 1. ç¡®è®¤å®¹é‡å¤Ÿä¸å¤Ÿï¼Œä¸å¤Ÿå°±æ‰©å®¹,æ­¤æ—¶sizeä¸º0
      ensureCapacityInternal(size + 1); 
      // 2. å¡«å…¥æ•°æ®
      elementData[size++] = e;
      return true;
  }

  // --- æ‰©å®¹æ ¸å¿ƒé€»è¾‘ grow() ---
  private void grow(int minCapacity) {
      // oldCapacity: æ—§å®¹é‡
      int oldCapacity = elementData.length;
      
      // newCapacity: æ–°å®¹é‡
      // æ ¸å¿ƒç®—æ³•ï¼šoldCapacity + (oldCapacity >> 1)
      // >> 1 è¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œç­‰åŒäºé™¤ä»¥ 2
      // æ‰€ä»¥ï¼šæ–°å®¹é‡ = æ—§å®¹é‡ + 0.5å€æ—§å®¹é‡ = 1.5å€æ—§å®¹é‡
      int newCapacity = oldCapacity + (oldCapacity >> 1);

      // ... çœç•¥éƒ¨åˆ†è¾¹ç•Œæ£€æŸ¥ä»£ç  ...

      // 3. çœŸæ­£å¹²æ´»çš„åœ°æ–¹ï¼šæ•°æ®è¿ç§»
      // Arrays.copyOf åº•å±‚è°ƒç”¨ System.arraycopyï¼Œåœ¨å †å†…å­˜ä¸­åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶æ•°æ®
      elementData = Arrays.copyOf(elementData, newCapacity);
  }
  ```

  â€‹**æºç ç»“è®º**ï¼š

  1. â€‹**æ‰©å®¹å…¬å¼**â€‹ï¼š`old + old >> 1` (å³ 1.5 å€)ã€‚
  2. â€‹**æ€§èƒ½æŸè€—ç‚¹**â€‹ï¼š`Arrays.copyOf`â€‹ã€‚æ¯æ¬¡æ‰©å®¹éƒ½è¦åˆ›å»ºæ–°æ•°ç»„ã€æ¬è¿æ—§æ•°æ®ï¼Œæ‰€ä»¥â€‹**å¦‚æœåœ¨å¾ªç¯ä¸­é¢‘ç¹ addï¼Œä¸”ä¸æŒ‡å®šåˆå§‹å®¹é‡ï¼Œæ€§èƒ½ä¼šå¾ˆå·®**ã€‚

  ---

  ### 2. LinkedList æºç æ·±åº¦å‰–æ

  â€‹**æ ¸å¿ƒæœ¬è´¨**â€‹ï¼šLinkedList æ˜¯ç”±ä¸€ä¸ªä¸ª**èŠ‚ç‚¹ (Node)**  å¯¹è±¡ä¸²è”èµ·æ¥çš„ã€‚å®ƒæ²¡æœ‰â€œæ•°ç»„â€è¿™ä¸ªæ¦‚å¿µã€‚

  #### A. æ ¸å¿ƒå†…éƒ¨ç±» (Node)

  LinkedList çš„å¿ƒè„æ˜¯è¿™ä¸ªé™æ€å†…éƒ¨ç±»ï¼š

  Java

  ```
  private static class Node<E> {
      E item;       // çœŸæ­£å­˜çš„æ•°æ®
      Node<E> next; // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„â€œæŒ‡é’ˆâ€ (å¼•ç”¨)
      Node<E> prev; // æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„â€œæŒ‡é’ˆâ€

      Node(Node<E> prev, E element, Node<E> next) {
          this.item = element;
          this.next = next;
          this.prev = prev;
      }
  }
  ```

  #### B. æ ¸å¿ƒæˆå‘˜å˜é‡

  LinkedList åªéœ€è¦æ‹¿æä½â€œå¤´â€å’Œâ€œå°¾â€ã€‚

  Java

  ```
  public class LinkedList<E> ... {
      transient int size = 0;

      // æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ
      transient Node<E> first;

      // æŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ (å…³é”®ï¼ä¸ºäº†è®© add é€Ÿåº¦å˜å¿«)
      transient Node<E> last;
  }
  ```

  #### C. add æ–¹æ³• (é“¾æ¥çš„è‰ºæœ¯)

  å½“ä½ è°ƒç”¨ `list.add("B")`â€‹ æ—¶ï¼Œå…¶å®æ˜¯è°ƒç”¨äº† `linkLast`ï¼ŒæŠŠæ–°èŠ‚ç‚¹æŒ‚åœ¨é“¾è¡¨æœ«å°¾ã€‚

  Java

  ```
  void linkLast(E e) {
      // 1. å…ˆè®°ä¸‹å½“å‰çš„å°¾èŠ‚ç‚¹
      final Node<E> l = last;
      
      // 2. åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹
      // æ„é€ å™¨å‚æ•°ï¼š(å‰é©±èŠ‚ç‚¹æ˜¯ l, æ•°æ®æ˜¯ e, åç»§èŠ‚ç‚¹æ˜¯ null)
      final Node<E> newNode = new Node<>(l, e, null);
      
      // 3. æ›´æ–°å°¾æŒ‡é’ˆï¼Œç°åœ¨ newNode ä¹Ÿå°±æ˜¯æœ€æ–°çš„å°¾å·´äº†
      last = newNode;
      
      if (l == null)
          // å¦‚æœä¹‹å‰é“¾è¡¨æ˜¯ç©ºçš„ï¼Œé‚£æ–°èŠ‚ç‚¹æ—¢æ˜¯å°¾ä¹Ÿæ˜¯å¤´
          first = newNode;
      else
          // å¦‚æœä¹‹å‰æœ‰æ•°æ®ï¼ŒæŠŠæ—§å°¾å·´çš„ next æŒ‡å‘æ–°èŠ‚ç‚¹ (è¿èµ·æ¥äº†ï¼)
          l.next = newNode;
          
      size++;
  }
  ```

  â€‹**æºç ç»“è®º**ï¼š

  1. â€‹**æ²¡æœ‰æ‰©å®¹**ï¼šLinkedList æ ¹æœ¬ä¸å­˜åœ¨â€œæ‰©å®¹â€çš„ä»£ç ï¼Œå­˜ä¸€ä¸ªåˆ›å»ºä¸€ä¸ª Nodeï¼Œå†…å­˜æ˜¯ä¸è¿ç»­çš„ã€‚
  2. â€‹**æŒ‡é’ˆæ“ä½œ**â€‹ï¼š`add`â€‹ æ“ä½œçº¯ç²¹æ˜¯å¼•ç”¨çš„èµ‹å€¼ï¼ˆ`next`â€‹, `prev`â€‹, `first`â€‹, `last`ï¼‰ï¼Œé€Ÿåº¦éå¸¸å¿«ï¼Œä¸æ¶‰åŠæ•°æ®æ¬è¿ã€‚

  ---

  ### ğŸ’¡ æºç å±‚é¢çš„ç»ˆæå¯¹æ¯”

  |**å¯¹æ¯”é¡¹**|**ArrayList æºç ç‰¹å¾**|**LinkedList æºç ç‰¹å¾**||||
  | --| --------------------------------------------| --------------------------------------| --| --| --|
  |**å†…å­˜ç»“æ„**|â€‹`Object[] elementData`(è¿ç»­å†…å­˜)|â€‹`Node<E>`å¯¹è±¡é“¾ (ç¦»æ•£å†…å­˜)||||
  |**æ‰©å®¹æ–¹å¼**|â€‹`old + (old >> 1)`â€‹(1.5å€) +`System.arraycopy`|æ— éœ€æ‰©å®¹ï¼Œ`new Node(...)`||||
  |**æ·»åŠ å…ƒç´ **|æ£€æŸ¥å®¹é‡ -\> æ‰©å®¹(å¯èƒ½) -\> æ•°ç»„èµ‹å€¼|åˆ›å»º Node -\> ä¿®æ”¹ prev/next æŒ‡é’ˆ||||
  |**è·å–å…ƒç´ **|â€‹`return elementData[index]`(ç›´æ¥è®¿é—®)|â€‹`node(index)`(for å¾ªç¯ä»å¤´æˆ–å°¾éå†)||||

  â€‹ **ğŸ‘¨â€ğŸ’» å¼€å‘å®æˆ˜å»ºè®®**ï¼š

  - â€‹**ArrayList**â€‹ï¼šå½“ä½ æ˜ç¡®çŸ¥é“å¤§æ¦‚è¦å­˜å¤šå°‘æ•°æ®æ—¶ï¼Œè¯·ä½¿ç”¨å¸¦å‚æ„é€ å™¨ `new ArrayList<>(100)`â€‹ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸­é—´å¤šæ¬¡æ‰©å®¹å¸¦æ¥çš„ `System.arraycopy` æ€§èƒ½æŸè€—ã€‚
  - **LinkedList**ï¼šé¢è¯•æ—¶å¯ä»¥è¯´å¾—å¤´å¤´æ˜¯é“ï¼Œä½†å®é™…å¼€å‘ä¸­ï¼ˆç‰¹åˆ«æ˜¯ç»“åˆ Spring å¼€å‘ Web åº”ç”¨æ—¶ï¼‰ï¼Œ99% çš„æƒ…å†µè¯·æ— è„‘ç”¨ `ArrayList`ã€‚å› ä¸ºç°ä»£ CPU å¯¹è¿ç»­å†…å­˜ï¼ˆæ•°ç»„ï¼‰æœ‰ç¼“å­˜ä¼˜åŒ–ï¼Œè€Œé“¾è¡¨çš„ç¦»æ•£å†…å­˜å¯¹ CPU ç¼“å­˜ä¸å‹å¥½ã€‚
- LinkededListé€šå¸¸ç”¨äºå®ç°æ ˆå’Œé˜Ÿåˆ—ï¼Œæ ˆæ˜¯å…ˆè¿›åå‡ºçš„ï¼Œé˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºçš„ã€‚javaä¸­ç¼–å†™äº†popå’Œpushæ¥å£ç”¨äºå®ç°å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œ
- ```java
  package com.itheima.demo7list;

  import java.util.LinkedList;

  public class ListDemo2 {
      public static void main(String[] args) {
          // ç›®æ ‡ï¼šç”¨LinkedListåšä¸€ä¸ªé˜Ÿåˆ—å¯¹è±¡ã€‚
          LinkedList<String> queue = new LinkedList<>();
          // å…¥é˜Ÿï¼Œæœ€å³è¾¹ï¼Œå°¾èŠ‚ç‚¹
          queue.addLast("èµµæ•");
          queue.addLast("è¥¿é—¨å¹é›ª");
          queue.addLast("é™†å°å‡¤");
          queue.addLast("çŸ³è§‚éŸ³");
          System.out.println(queue); // [èµµæ•, è¥¿é—¨å¹é›ª, é™†å°å‡¤, çŸ³è§‚éŸ³]

          // å‡ºé˜Ÿ
          System.out.println(queue.removeFirst());
          System.out.println(queue.removeFirst());
          System.out.println(queue);

          System.out.println("-------------------------------------------------");

          // åšä¸€ä¸ªæ ˆ
          LinkedList<String> stack = new LinkedList<>();
          // å‹æ ˆ
          stack.push("ç¬¬1é¢—å­å¼¹");
          stack.push("ç¬¬2é¢—å­å¼¹");
          stack.push("ç¬¬3é¢—å­å¼¹");
          stack.push("ç¬¬4é¢—å­å¼¹");
          System.out.println(stack);  // [ç¬¬4é¢—å­å¼¹, ç¬¬3é¢—å­å¼¹, ç¬¬2é¢—å­å¼¹, ç¬¬1é¢—å­å¼¹]

          // å‡ºæ ˆ
          System.out.println(stack.pop());
          System.out.println(stack.pop());
          System.out.println(stack);
      }
  }
  /* æºç ï¼špublic void push(E e) {
          addFirst(e);
  	åœ¨æœ€å·¦è¾¹ï¼Œå¤´ç»“ç‚¹ã€‚
  		public E pop() {
          return removeFirst();
      		}
      }*/
  ```

---

5. é›†åˆçš„éå†æ–¹å¼

å¯¹äº List é›†åˆï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§éå†æ–¹å¼ï¼š

1. **æ™®é€š for å¾ªç¯** (List ç‹¬æœ‰ï¼Œå› ä¸ºæœ‰ç´¢å¼•)ï¼š
2. **å¢å¼º for å¾ªç¯** (æœ€å¸¸ç”¨ï¼Œè¯­æ³•ç³–)ï¼š
3. **è¿­ä»£å™¨ Iterator** (å®ƒæ˜¯ Java é›†åˆéå†çš„åº•å±‚é€»è¾‘)ï¼š
4. **Lambdaè¡¨è¾¾å¼**

 **âš ï¸ è¿­ä»£å™¨çš„ä¸€ä¸ªå¤§å‘ï¼šConcurrentModificationException**

åœ¨ä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ï¼ˆåŒ…æ‹¬å¢å¼º for å¾ªç¯ï¼‰ï¼Œ**åƒä¸‡ä¸è¦**ç›´æ¥ç”¨é›†åˆå¯¹è±¡ `list.remove()` åˆ é™¤å…ƒç´ ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

- **è§£å†³**ï¼šå¿…é¡»ç”¨è¿­ä»£å™¨è‡ªå·±çš„ `it.remove()` æ–¹æ³•ã€‚

- è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸ä¸”é«˜é¢‘çš„é¢è¯•é¢˜ï¼Œä¹Ÿæ˜¯å¼€å‘ä¸­æœ€å®¹æ˜“è¸©çš„å‘ä¹‹ä¸€ã€‚

  ä¸ºä»€ä¹ˆ Java è¦è¿™ä¹ˆè®¾è®¡ï¼Ÿæ˜æ˜æˆ‘åªæ˜¯åˆ äº†ä¸ªå…ƒç´ ï¼Œå®ƒä¸ºä»€ä¹ˆè¦æŠ¥å¼‚å¸¸ï¼Ÿ

  ä¸ºäº†è®©ä½ å½»åº•ç†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯**ä»æºç å±‚é¢**æ¥ç ´æ¡ˆã€‚æ ¸å¿ƒæœºåˆ¶å«åš â€‹**Fail-Fast (å¿«é€Ÿå¤±è´¥æœºåˆ¶)** ã€‚

  ---

  ### ğŸ’¥ 1. æ¡ˆå‘ç°åœº (å¤ç°å¼‚å¸¸)

  æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä¸€å®šä¼šæŠ¥é”™çš„ä»£ç ï¼š

  Java

  ```
  List<String> list = new ArrayList<>();
  list.add("Java");
  list.add("Python");
  list.add("C++");

  // âŒ é”™è¯¯ç¤ºèŒƒï¼šå¢å¼º for å¾ªç¯ä¸­ç›´æ¥ç”¨ list åˆ é™¤
  for (String s : list) {
      if ("Python".equals(s)) {
          list.remove(s); // <--- è¿™é‡Œçš„ list.remove æ˜¯ç½ªé­ç¥¸é¦–
      }
  }
  // è¿è¡Œç»“æœï¼šException in thread "main" java.util.ConcurrentModificationException
  ```

  â€‹**åŸå› è§£æ**ï¼š

  å¢å¼º `for`â€‹ å¾ªç¯ï¼ˆfor-eachï¼‰æœ¬è´¨ä¸Šæ˜¯ **Iteratorï¼ˆè¿­ä»£å™¨ï¼‰**  çš„è¯­æ³•ç³–ã€‚ç¼–è¯‘å™¨æŠŠä¸Šé¢ä»£ç å˜æˆäº†è¿™æ ·ï¼š

  Java

  ```
  Iterator<String> it = list.iterator();
  while (it.hasNext()) {
      String s = it.next(); // <--- å¼‚å¸¸å…¶å®æ˜¯åœ¨è¿™ä¸€æ­¥æŠ›å‡ºçš„ï¼
      if ("Python".equals(s)) {
          list.remove(s); 
      }
  }
  ```

  ---

  ### ğŸ•µï¸â€â™‚ï¸ 2. æºç ç ´æ¡ˆ (modCount æœºåˆ¶)

  è¦ç†è§£ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Œå¿…é¡»çœ‹ `ArrayList`â€‹ åŠå…¶å†…éƒ¨ç±» `Itr` (è¿­ä»£å™¨å®ç°) çš„æºç ã€‚

  è¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®å˜é‡ï¼š

  1. â€‹**â€‹`modCount`â€‹**â€‹  **(å®é™…ä¿®æ”¹æ¬¡æ•°)** â€‹ï¼šå®šä¹‰åœ¨ `AbstractList`â€‹ ä¸­ã€‚List æ¯ `add`â€‹ æˆ– `remove`â€‹ ä¸€æ¬¡ï¼Œè¿™ä¸ªå€¼å°± `+1`ã€‚
  2. â€‹**â€‹`expectedModCount`â€‹**â€‹  **(é¢„æœŸä¿®æ”¹æ¬¡æ•°)** â€‹ï¼šå®šä¹‰åœ¨ `Itr`â€‹ (è¿­ä»£å™¨) ä¸­ã€‚å½“è¿­ä»£å™¨â€‹**åˆ›å»ºçš„é‚£ä¸€ç¬é—´**â€‹ï¼Œå®ƒä¼šæŠŠå½“æ—¶çš„ `modCount` æŠ„å†™ä¸€ä»½ç»™è‡ªå·±ä¿å­˜ã€‚

  #### åœºæ™¯è¿˜åŸï¼š

  1. â€‹**åˆå§‹åŒ–**â€‹ï¼šList å­˜äº† 3 ä¸ªå…ƒç´ ï¼Œå‡è®¾ç»è¿‡ 3 æ¬¡ addï¼Œ`modCount = 3`ã€‚
  2. â€‹**åˆ›å»ºè¿­ä»£å™¨**â€‹ï¼š`Iterator it = list.iterator();`

     - è¿­ä»£å™¨å†…éƒ¨è®°å½•ï¼š`expectedModCount = 3` (åˆšåˆ›å»ºæ—¶ä¸¤è€…ç›¸ç­‰)ã€‚
  3. â€‹**å¼€å§‹éå†**ï¼š

     - ç¬¬ä¸€æ¬¡ `next()`â€‹ï¼š`3 == 3`ï¼Œé€šè¿‡ã€‚
  4. â€‹**è§¦å‘åˆ é™¤**â€‹ï¼šè°ƒç”¨ â€‹**â€‹`list.remove("Python")`â€‹** ã€‚

     - â€‹**é‡ç‚¹**â€‹ï¼š`list.remove`â€‹ ä¼šå¯¼è‡´ List çš„ `modCount`â€‹ å˜æˆ â€‹**4**ã€‚
     - â€‹**ä½†æ˜¯**â€‹ï¼šè¿­ä»£å™¨é‡Œçš„ `expectedModCount`â€‹ è¿˜æ˜¯ â€‹**3**ã€‚
  5. â€‹**ç»§ç»­éå†**â€‹ï¼šä¸‹ä¸€æ¬¡å¾ªç¯è°ƒç”¨ â€‹**â€‹`it.next()`â€‹** ã€‚

     - æˆ‘ä»¬æ¥çœ‹ `next()` çš„æºç ï¼š

  Java

  ```
  // ArrayList çš„å†…éƒ¨ç±» Itr ä¸­çš„ next() æ–¹æ³•
  public E next() {
      // 1. è¿›æ¥ç¬¬ä¸€ä»¶äº‹ï¼šæ£€æŸ¥ç‰ˆæœ¬å·ï¼
      checkForComodification(); 
      // ... çœç•¥å–æ•°æ®ä»£ç  ...
  }

  final void checkForComodification() {
      // æ ¸å¿ƒåˆ¤æ–­ï¼šList çš„å®é™…ä¿®æ”¹æ¬¡æ•° vs è¿­ä»£å™¨é¢„æœŸçš„æ¬¡æ•°
      if (modCount != expectedModCount)
          // å¦‚æœä¸ç›¸ç­‰ï¼Œè¯´æ˜åœ¨æˆ‘è¿­ä»£æœŸé—´ï¼Œæœ‰äººåŠ¨äº† Listï¼ˆå“ªæ€•æ˜¯ä½ è‡ªå·±åŠ¨çš„ï¼‰
          throw new ConcurrentModificationException(); // æŠ›å‡ºå¼‚å¸¸
  }
  ```

  â€‹**ç»“è®º**â€‹ï¼šå› ä¸º `list.remove()`â€‹ ä¿®æ”¹äº† `modCount`â€‹ï¼Œå¯¼è‡´å’Œè¿­ä»£å™¨æ‰‹ä¸­çš„ `expectedModCount`â€‹ **å¯¹ä¸ä¸Šå·äº†**ï¼Œè¿­ä»£å™¨è®¤ä¸ºé›†åˆä¹Ÿæ˜¯â€œä¸å®‰å…¨â€çš„ï¼Œäºæ˜¯ç«‹å³æŠ›å‡ºå¼‚å¸¸ç»ˆæ­¢ç¨‹åºã€‚

  ---

  ### âœ… 3. è§£å†³æ–¹æ¡ˆ (it.remove)

  ä¸ºä»€ä¹ˆæ”¹æˆ `it.remove()` å°±æ²¡äº‹äº†å‘¢ï¼Ÿçœ‹çœ‹æºç å°±çŸ¥é“äº†ã€‚

  Java

  ```
  // è¿­ä»£å™¨è‡ªå·±çš„ remove æ–¹æ³•
  public void remove() {
      // ... æ£€æŸ¥ ...
      
      // 1. è°ƒç”¨ List çš„ remove åˆ é™¤å…ƒç´  (List çš„ modCount ä¼š +1)
      ArrayList.this.remove(lastRet); 
      
      // 2. ã€å…³é”®ä¸€æ­¥ã€‘ï¼šåŒæ­¥ç‰ˆæœ¬å·ï¼ï¼ï¼
      // æŠŠ List å˜åŠ¨åçš„ modCount é‡æ–°èµ‹å€¼ç»™è¿­ä»£å™¨çš„ expectedModCount
      expectedModCount = modCount; 
      
      // ...
  }
  ```

  â€‹**åŸç†**â€‹ï¼šè¿­ä»£å™¨è‡ªå·±çš„ `remove`â€‹ æ–¹æ³•åœ¨åˆ å®Œå…ƒç´ åï¼Œåšäº†ä¸€æ­¥  **â€œè‡ªæˆ‘ä¿®æ­£â€**  çš„æ“ä½œï¼Œæ‰‹åŠ¨æŠŠè‡ªå·±çš„ `expectedModCount`â€‹ æ›´æ–°æˆäº†æœ€æ–°çš„ `modCount`â€‹ã€‚è¿™æ ·ä¸‹ä¸€æ¬¡è°ƒç”¨ `next()`â€‹ æ£€æŸ¥æ—¶ï¼Œ`4 == 4`ï¼Œå°±èƒ½é€šè¿‡äº†ã€‚

  â€‹**æ­£ç¡®ä»£ç **ï¼š

  Java

  ```
  Iterator<String> it = list.iterator();
  while (it.hasNext()) {
      String s = it.next();
      if ("Python".equals(s)) {
          it.remove(); // âœ… ä½¿ç”¨è¿­ä»£å™¨çš„åˆ é™¤ï¼ŒåŒ…å«â€œåŒæ­¥ç‰ˆæœ¬å·â€çš„é€»è¾‘
      }
  }
  ```

  ---

  ### ğŸš€ 4. ç°ä»£å†™æ³• (Java 8+)

  è™½ç„¶ `it.remove()`â€‹ æ˜¯ç»å…¸è€ƒç‚¹ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼ˆJDK 1.8 ä¹‹åï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ›´ä¼˜é›…çš„ â€‹**â€‹`removeIf`â€‹**ï¼š

  Java

  ```
  // ä¸€è¡Œä»£ç æå®šï¼Œåº•å±‚åŸç†å…¶å®å°±æ˜¯è¿­ä»£å™¨éå†åˆ é™¤
  list.removeIf(s -> "Python".equals(s));
  ```

  ### æ€»ç»“

  1. â€‹**Exception æ¥æº**â€‹ï¼š`next()`â€‹ æ–¹æ³•ä¸­çš„ `checkForComodification()` æ£€æŸ¥ã€‚
  2. â€‹**æ ¸å¿ƒåŸå› **â€‹ï¼š`modCount`â€‹ (Listçš„) å’Œ `expectedModCount`â€‹ (è¿­ä»£å™¨çš„) â€‹**æ•°å€¼ä¸ä¸€è‡´**ã€‚
  3. â€‹**è§£å†³**â€‹ï¼šä½¿ç”¨ `Iterator`â€‹ è‡ªå·±çš„ `remove()`â€‹ æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¼šåœ¨åˆ é™¤å**åŒæ­¥**è¿™ä¸¤ä¸ªå€¼ã€‚

â€
