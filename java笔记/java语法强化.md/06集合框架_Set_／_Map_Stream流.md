# 06é›†åˆæ¡†æ¶|Set|ï¼|Map|Streamæµ

- [ ] æ•²ä¸€éä»£ç ï¼Œç†Ÿæ‚‰é›†åˆæ¡†æ¶ï¼ŒåŒ¿åå†…éƒ¨ç±»ã€Lambdaã€æ–¹æ³•å¼•ç”¨ä¸æ˜¯å¾ˆç†Ÿ

---

è¿™éƒ¨åˆ†çŸ¥è¯†ç‚¹æ˜¯é›†åˆè¿›é˜¶ä¸­çš„éš¾ç‚¹ï¼Œç‰¹åˆ«æ˜¯ `HashSet` çš„å»é‡åŸç†ï¼Œæ˜¯é¢è¯•ä¸­ 100% ä¼šè¢«é—®åˆ°çš„é—®é¢˜ã€‚

ä¸ºä½ æ•´ç†äº† **Set é›†åˆå…¨å®¶æ¡¶** çš„æ ¸å¿ƒç¬”è®°ï¼Œæ¶µç›–äº†åº•å±‚åŸç†å’Œä½¿ç”¨åœºæ™¯ã€‚

![image](assets/image-20260206221342-0ab1n4g.png)

---

### ğŸ“¦ 1. Set é›†åˆçš„ç‰¹ç‚¹ (Overview)

â€‹`Set`â€‹ æ¥å£ç»§æ‰¿è‡ª `Collection`â€‹ï¼Œå®ƒçš„æ ¸å¿ƒç‰¹ç‚¹å¯ä»¥æ¦‚æ‹¬ä¸º  **â€œä¸‰æ— â€** ï¼ˆé’ˆå¯¹æœ€å¸¸ç”¨çš„ HashSetï¼‰ï¼š

1. **æ— åº** (Unordered)ï¼šå­˜å–é¡ºåºä¸ä¸€è‡´ï¼ˆä½ å­˜ A, B, Cï¼Œå–å‡ºæ¥å¯èƒ½æ˜¯ C, A, Bï¼‰ã€‚
2. **ä¸é‡å¤** (Unique)ï¼š**è¿™æ˜¯ Set æœ€é‡è¦çš„ç‰¹æ€§**ã€‚å¦‚æœæ’å…¥é‡å¤å…ƒç´ ï¼Œæ“ä½œä¼šè¢«å¿½ç•¥ï¼ˆ`add`â€‹ æ–¹æ³•è¿”å› `false`ï¼‰ã€‚
3. **æ— ç´¢å¼•** (No Index)ï¼šæ²¡æœ‰ä¸‹æ ‡ï¼Œä¸èƒ½é€šè¿‡ `get(i)` æ¥è·å–å…ƒç´ ï¼Œåªèƒ½é€šè¿‡è¿­ä»£å™¨æˆ–å¢å¼º for å¾ªç¯éå†ã€‚

---

### ğŸ—ï¸ 2. HashSet é›†åˆçš„åº•å±‚åŸç† (é‡ç‚¹)

**ä¸€å¥è¯æ€»ç»“**ï¼šHashSet çš„åº•å±‚å…¶å®å°±æ˜¯ä¸€ä¸ª **HashMap**ã€‚å®ƒæŠŠæ•°æ®å­˜å‚¨åœ¨ HashMap çš„ **Key** ä¸Šï¼Œè€Œ Value åªæ˜¯ä¸€ä¸ªå ä½çš„ Object å¯¹è±¡ã€‚

#### æ ¸å¿ƒç»“æ„ï¼šå“ˆå¸Œè¡¨ (Hash Table)

åœ¨ JDK 8 ä»¥åï¼Œå“ˆå¸Œè¡¨çš„ç»“æ„æ˜¯ï¼š**æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘**ã€‚

#### ğŸš« å¦‚ä½•ä¿è¯â€œä¸é‡å¤â€ï¼Ÿ(å»é‡æœºåˆ¶)	

å½“ä½ è°ƒç”¨ `add(E e)` æ—¶ï¼ŒHashSet ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **ç®—å“ˆå¸Œ**ï¼šè°ƒç”¨å…ƒç´ å¯¹è±¡çš„ `hashCode()` æ–¹æ³•ï¼Œè®¡ç®—å‡ºå“ˆå¸Œå€¼ã€‚
2. **æ‰¾ä½ç½®**ï¼šæ ¹æ®å“ˆå¸Œå€¼ï¼Œè®¡ç®—å‡ºè¯¥å…ƒç´ åœ¨åº•å±‚æ•°ç»„ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ï¼‰ã€‚
3. **åˆ¤æ–­ä½ç½®çŠ¶æ€**ï¼š

- **æƒ…å†µ Aï¼šä½ç½®æ˜¯ç©ºçš„** -> ç›´æ¥å­˜å…¥ã€‚
- **æƒ…å†µ Bï¼šä½ç½®æœ‰æ•°æ®** (å“ˆå¸Œå†²çª) ->
- å…ˆæ£€æŸ¥å“ˆå¸Œå€¼æ˜¯å¦ä¸€æ ·ã€‚
- å¦‚æœå“ˆå¸Œå€¼ä¸€æ ·ï¼Œå†è°ƒç”¨ `equals()` æ–¹æ³•æ¯”è¾ƒå†…å®¹ã€‚
- **å¦‚æœ equals è¿”å› true**ï¼šè®¤ä¸ºæ˜¯åŒä¸€ä¸ªå…ƒç´ ï¼Œ**èˆå¼ƒ**ï¼ˆä¸å­˜ï¼‰ã€‚
- **å¦‚æœ equals è¿”å› false**ï¼šè®¤ä¸ºæ˜¯ä¸åŒå…ƒç´ ï¼Œ**æŒ‚åœ¨ä¸‹é¢**ï¼ˆå½¢æˆé“¾è¡¨ï¼‰ã€‚

>  **âš ï¸ å¿…é¡»èƒŒä¸‹æ¥çš„è§„åˆ™**ï¼š  
> å¦‚æœä½ æŠŠè‡ªå®šä¹‰å¯¹è±¡ï¼ˆå¦‚ `Student`â€‹ï¼‰å­˜å…¥ HashSetï¼Œ**å¿…é¡»åŒæ—¶é‡å†™** **â€‹`hashCode()`â€‹** â€‹ **å’Œ** **â€‹`equals()`â€‹** â€‹ **æ–¹æ³•**ï¼Œå¦åˆ™å»é‡ä¼šå¤±æ•ˆï¼

#### çº¢é»‘æ ‘æ ‘åŒ– (æ€§èƒ½ä¼˜åŒ–)

å½“é“¾è¡¨é•¿åº¦è¶…è¿‡ **8** ä¸”æ•°ç»„é•¿åº¦ >= **64** æ—¶ï¼Œé“¾è¡¨ä¼šè‡ªåŠ¨è½¬ä¸º**çº¢é»‘æ ‘**ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚

---

### åº•å±‚åŸç†(JDK 1.8åŠ å…¥çº¢é»‘æ ‘ä¼˜åŒ–)

#### 1. æ ¸å¿ƒå‚æ•°å‡†å¤‡ (åˆå§‹åŒ–)

- â€‹**åˆå§‹å®¹é‡ (Capacity)** â€‹ï¼š`16`ï¼ˆé»˜è®¤ï¼‰ã€‚

  - â€‹*æ³¨æ„*â€‹ï¼š`new`â€‹ çš„æ—¶å€™ä¸åˆ›å»ºï¼Œ**ç¬¬ä¸€æ¬¡** **â€‹`put`â€‹**â€‹ **æ—¶**æ‰æ‡’åŠ è½½åˆ›å»ºã€‚
- â€‹**åŠ è½½å› å­ (Load Factor)** â€‹ï¼š`0.75`ã€‚

  - â€‹*å«ä¹‰*ï¼šæ•°ç»„å¡«æ»¡ 75% å°±æ‰©å®¹ã€‚
  - â€‹*åŸç†*â€‹ï¼šè¿™æ˜¯**æ—¶é—´**ä¸**ç©ºé—´**çš„æŠ˜ä¸­ã€‚

    - å¦‚æœ \> 0.75ï¼ˆå¦‚ 1.0ï¼‰ï¼šç©ºé—´çœäº†ï¼Œä½†å“ˆå¸Œå†²çªå¢åŠ ï¼ŒæŸ¥è¯¢å˜æ…¢ã€‚
    - å¦‚æœ \< 0.75ï¼ˆå¦‚ 0.5ï¼‰ï¼šå†²çªå°‘äº†ï¼ŒæŸ¥è¯¢å¿«ï¼Œä½†é¢‘ç¹æ‰©å®¹æµªè´¹ç©ºé—´ã€‚
- â€‹**æ‰©å®¹é˜ˆå€¼ (Threshold)** â€‹ï¼š`16 * 0.75 = 12`ã€‚å½“å…ƒç´ ä¸ªæ•°è¶…è¿‡ 12 æ—¶è§¦å‘ã€‚

---

#### 2. PUT æ–¹æ³•æ‰§è¡Œæµç¨‹ (å­˜æ•°æ®)

**ç¬¬ä¸€æ­¥ï¼šè®¡ç®—ä½ç½® (Hash & Index)**

1. â€‹**ç®— Hash**â€‹ï¼šä¸ä»…ä»…æ˜¯ `hashCode()`ã€‚

   - å…¬å¼ï¼š`(h = key.hashCode()) ^ (h >>> 16)`
   - â€‹*ç›®çš„*ï¼šè®©é«˜ä½ä¹Ÿå‚ä¸è¿ç®—ï¼Œæ‰“æ•£å“ˆå¸Œå€¼ï¼Œå‡å°‘ç¢°æ’ã€‚
2. â€‹**ç®— Index**ï¼šä¸ä»…ä»…æ˜¯å–æ¨¡ã€‚

   - å…¬å¼ï¼š`index = (n - 1) & hash`
   - â€‹*å‰æ*â€‹ï¼šæ•°ç»„é•¿åº¦ n å¿…é¡»æ˜¯ â€‹**2 çš„å¹‚æ¬¡æ–¹**ã€‚æ­¤æ—¶è¯¥ä½è¿ç®—ç­‰ä»·äºå–æ¨¡ï¼Œä½†æ•ˆç‡æé«˜ã€‚

**ç¬¬äºŒæ­¥ï¼šåˆ¤æ–­ä½ç½®çŠ¶æ€**

- **æƒ…å†µ Aï¼šä½ç½®æ˜¯ null**

  - ç›´æ¥åˆ›å»º Node å­˜å…¥ã€‚
- **æƒ…å†µ Bï¼šä½ç½®ä¸æ˜¯ null (å‘ç”Ÿå“ˆå¸Œå†²çª)**

  1. â€‹**å…ˆæ¯”å¯¹é¦–èŠ‚ç‚¹**â€‹ï¼šæ¯”è¾ƒ Hash å€¼å’Œ key çš„ `equals()`ã€‚

     - å¦‚æœç›¸åŒ -\> **ä¸å­˜**
  2. â€‹**åˆ¤æ–­ç»“æ„**â€‹ï¼šæ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯ `TreeNode`â€‹ (çº¢é»‘æ ‘) è¿˜æ˜¯ `Node` (é“¾è¡¨)ã€‚

     - å¦‚æœæ˜¯æ ‘ -\> èµ°**çº¢é»‘æ ‘æ’å…¥**é€»è¾‘ã€‚
     - å¦‚æœæ˜¯é“¾è¡¨ -\> èµ°**é“¾è¡¨æ’å…¥**é€»è¾‘ã€‚

**ç¬¬ä¸‰æ­¥ï¼šé“¾è¡¨æ’å…¥é€»è¾‘ (JDK 8 ç‰¹æ€§)** 	

1. **éå†é“¾è¡¨**ï¼šé‡‡ç”¨**å°¾æ’æ³•**ï¼ˆç›´æ¥æŒ‚åœ¨æœ€åé¢ï¼‰ã€‚

   JDK 8ä¹‹å‰ï¼Œæ–°å…ƒç´ å­˜å…¥æ•°ç»„ï¼Œå è€å…ƒç´ ä½ç½®ï¼Œè€å…ƒç´ æŒ‚ä¸‹é¢  
   **JDK 8å¼€å§‹ä¹‹åï¼Œæ–°å…ƒç´ ç›´æ¥æŒ‚åœ¨è€å…ƒç´ ä¸‹é¢**
2. â€‹**æŸ¥é‡**ï¼šéå†è¿‡ç¨‹ä¸­è‹¥å‘ç° key å·²å­˜åœ¨ï¼Œåˆ™è¦†ç›–ã€‚
3. â€‹**æ ‘åŒ–åˆ¤æ–­**ï¼šæ’å…¥å®Œæˆåï¼Œæ£€æŸ¥å½“å‰é“¾è¡¨é•¿åº¦ã€‚

   - å¦‚æœé•¿åº¦ \> **8** ä¸” æ•°ç»„é•¿åº¦ \>\= â€‹**64**ï¼š
   - ğŸ‘‰ **é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘** (O(n) -\> O(log n))ã€‚

---

#### 3. æ‰©å®¹æœºåˆ¶ (Resize) 

â€‹**è§¦å‘æ—¶æœº**â€‹ï¼š`Size > Threshold (å®¹é‡ * 0.75)`ã€‚

â€‹**æ‰©å®¹åŠ¨ä½œ**ï¼š

1. åˆ›å»ºæ–°æ•°ç»„ï¼Œé•¿åº¦æ˜¯æ—§æ•°ç»„çš„ â€‹**2 å€**â€‹ï¼ˆä¾‹å¦‚ 16 -\> 32ï¼‰ã€‚
2. â€‹**æ•°æ®è¿ç§» (Rehash çš„ä¼˜åŒ–)** ï¼š

   - JDK 8 **ä¸éœ€è¦**åƒ JDK 7 é‚£æ ·é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ çš„ Hash å€¼ã€‚
   - å®ƒæ˜¯é€šè¿‡è§‚å¯Ÿ\*\*Hash å€¼çš„äºŒè¿›åˆ¶â€œé«˜ä½â€\*\*æ¥å†³å®šçš„ã€‚

â€‹**è¿ç§»è§„åˆ™ (é«˜ä½åˆ¤æ–­)** ï¼š

å‡è®¾æ—§æ•°ç»„é•¿åº¦ 16 (`10000`)ï¼Œæ‰©å®¹åˆ° 32ã€‚

æˆ‘ä»¬åœ¨è®¡ç®—ä¸‹æ ‡æ—¶ï¼Œåªéœ€è¦çœ‹ â€‹**hash å€¼å€’æ•°ç¬¬ 5 ä½**ï¼ˆä¹Ÿå°±æ˜¯æ—§æ•°ç»„é•¿åº¦å¯¹åº”çš„é‚£ä¸€ä½ï¼‰æ˜¯ 0 è¿˜æ˜¯ 1ï¼š

- â€‹**å¦‚æœæ˜¯ 0 (ä½ä½)** ï¼š

  - å…ƒç´ ä½ç½®**ä¸å˜** (ä»åœ¨åŸç´¢å¼•)ã€‚
- â€‹**å¦‚æœæ˜¯ 1 (é«˜ä½)** ï¼š

  - å…ƒç´ ä½ç½® \= **åŸç´¢å¼• + æ—§æ•°ç»„é•¿åº¦** (åŸç´¢å¼• + 16)ã€‚

> â€‹**æ€»ç»“æ•ˆæœ**ï¼š
>
> åŸæœ¬æŒ¤åœ¨åŒä¸€ä¸ªæ¡¶é‡Œçš„é“¾è¡¨ï¼Œæ‰©å®¹åä¼šè¢«**æ‹†åˆ†**æˆä¸¤é˜Ÿã€‚ä¸€é˜Ÿç•™åœ¨åŸåœ°ï¼Œä¸€é˜Ÿæ¬åˆ°æ–°å®¶ï¼Œä»è€Œç¬é—´ç¼“è§£äº†æ‹¥å µã€‚

---

è¿™ä»½æ€»ç»“æ¶µç›–äº†â€‹**åˆå§‹åŒ–ã€å“ˆå¸Œè®¡ç®—ã€å†²çªå¤„ç†ã€æ ‘åŒ–æœºåˆ¶ã€æ‰©å®¹é€»è¾‘**â€‹ï¼Œç‰¹åˆ«æ˜¯æŠŠ JDK 8 çš„**é«˜ä½è¿ç®—æ³•åˆ™**è®²æ¸…æ¥šäº†ã€‚è¿™æ ·æ•´ç†æ˜¯å¦ç¬¦åˆä½ çš„ç¬”è®°æ ‡å‡†ï¼Ÿ

---

### ğŸ”— 3. LinkedHashSet é›†åˆçš„åº•å±‚åŸç†

**ç‰¹ç‚¹**ï¼š**æœ‰åº**ã€ä¸é‡å¤ã€æ— ç´¢å¼•ã€‚

> è¿™é‡Œçš„â€œæœ‰åºâ€æ˜¯æŒ‡ **ä¿è¯â€œæ€ä¹ˆå­˜å°±æ€ä¹ˆå–â€**  (Insertion Order)ã€‚

**åº•å±‚åŸç†**ï¼š  
å®ƒæ˜¯ HashSet çš„å­ç±»ã€‚åº•å±‚ä¾ç„¶æ˜¯å“ˆå¸Œè¡¨ï¼Œä½†å®ƒå¤šåšäº†ä¸€ä»¶äº‹ï¼š**å¤šç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨**ã€‚

- æ¯ä¸ªèŠ‚ç‚¹ä¸ä»…å­˜æ•°æ®ï¼Œè¿˜è®°å½•äº†â€œä¸Šä¸€ä¸ªå…ƒç´ æ˜¯è°â€å’Œâ€œä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯è°â€ã€‚
- **ä½œç”¨**ï¼šåœ¨éå†æ—¶ï¼Œä¸æŒ‰ç…§å“ˆå¸Œè¡¨çš„éšæœºé¡ºåºï¼Œè€Œæ˜¯æŒ‰ç…§åŒå‘é“¾è¡¨çš„è®°å½•é¡ºåºæ¥è¾“å‡ºï¼Œä»è€Œå®ç°äº†â€œæœ‰åºâ€ã€‚

---

### ğŸŒ² 4. TreeSet é›†åˆ

**ç‰¹ç‚¹**ï¼š**å¯æ’åº**ã€ä¸é‡å¤ã€æ— ç´¢å¼•ã€‚

> è¿™é‡Œçš„â€œå¯æ’åºâ€æ˜¯æŒ‡ **æŒ‰ç…§æ•°å€¼å¤§å°æˆ–å­—å…¸è§„åˆ™æ’åº** (Sorted)ï¼Œè€Œä¸æ˜¯æ’å…¥é¡ºåºã€‚

**åº•å±‚åŸç†**ï¼š  
åŸºäº **çº¢é»‘æ ‘ (Red-Black Tree)**  å®ç°ã€‚çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œèƒ½ä¿è¯æ•°æ®è‡ªåŠ¨æ’å¥½åºã€‚

- å¯¹äº**æ•°å€¼ç±»å‹**ï¼šInteger , Doubleï¼Œé»˜è®¤æŒ‰ç…§æ•°å€¼æœ¬èº«çš„å¤§å°è¿›è¡Œå‡åºæ’åºã€‚
- å¯¹äº**å­—ç¬¦ä¸²ç±»å‹**ï¼šé»˜è®¤æŒ‰ç…§é¦–å­—ç¬¦çš„ç¼–å·å‡åºæ’åºã€‚
- å¯¹äº**è‡ªå®šä¹‰ç±»å‹å¦‚Studentå¯¹è±¡**ï¼ŒTreeSeté»˜è®¤æ˜¯æ— æ³•ç›´æ¥æ’åºçš„ã€‚

#### å®ƒçš„ä¸¤ç§æ’åºæ–¹å¼ (é¢è¯•è€ƒç‚¹)

TreeSet åœ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ¯”è¾ƒé€»è¾‘æ¥ç¡®å®šèŠ‚ç‚¹ä½ç½®ã€‚å¦‚æœå…ƒç´ ä¸çŸ¥é“æ€ä¹ˆæ¯”è¾ƒï¼ˆæ¯”å¦‚ä¸¤ä¸ª Student å¯¹è±¡ï¼‰ï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚å¿…é¡»æŒ‡å®šæ¯”è¾ƒè§„åˆ™ï¼š

**ä¸¤ç§æ–¹å¼ä¸­**ï¼Œå…³äºè¿”å›å€¼çš„è§„åˆ™ï¼š  
å¦‚æœè®¤ä¸ºç¬¬ä¸€ä¸ªå…ƒç´  >  ç¬¬äºŒä¸ªå…ƒç´  è¿”å›æ­£æ•´æ•°å³å¯ã€‚**é€šå¸¸ä¸º1**  
å¦‚æœè®¤ä¸ºç¬¬ä¸€ä¸ªå…ƒç´  < ç¬¬äºŒä¸ªå…ƒç´ è¿”å›è´Ÿæ•´æ•°å³å¯ã€‚**é€šå¸¸ä¸º-1**  
å¦‚æœè®¤ä¸ºç¬¬ä¸€ä¸ªå…ƒç´  = ç¬¬äºŒä¸ªå…ƒç´ **è¿”å›0å³å¯**ï¼Œæ­¤æ—¶Treeseté›†åˆåªä¼šä¿ç•™ä¸€ä¸ªå…ƒç´ ï¼Œè®¤ä¸ºä¸¤è€…é‡å¤ã€‚

**æ–¹å¼ä¸€ï¼šè‡ªç„¶æ’åº (Comparable)**

- è®©å…ƒç´ ç±»ï¼ˆå¦‚ `Student`â€‹ï¼‰å®ç° `Comparable<Student>` æ¥å£ã€‚
- é‡å†™ `compareTo(Student o)`â€‹ æ–¹æ³•ï¼Œå®šä¹‰æ’åºè§„åˆ™ï¼ˆå¦‚æŒ‰å¹´é¾„å‡åºï¼š`this.age - o.age`ï¼‰ã€‚

**æ–¹å¼äºŒï¼šæ¯”è¾ƒå™¨æ’åº (Comparator)â€”â€”â€”â€”è¾ƒä¸ºæ¨èçš„å†™æ³•**

- åœ¨åˆ›å»º TreeSet é›†åˆæ—¶ï¼Œç›´æ¥åœ¨æ„é€ å™¨ä¸­ä¼ ä¸€ä¸ª `Comparator` å¯¹è±¡ï¼ˆé€šå¸¸ç”¨ Lambda è¡¨è¾¾å¼ï¼‰ã€‚
- *åœºæ™¯ï¼šå¦‚æœä¸æ–¹ä¾¿ä¿®æ”¹* *â€‹`Student`â€‹*â€‹ *ç±»çš„æºç ï¼Œæˆ–è€…éœ€è¦å¤šç§æ’åºè§„åˆ™æ—¶ä½¿ç”¨ã€‚*

```java
// ç¤ºä¾‹ï¼šæŒ‰ç…§å­—ç¬¦ä¸²é•¿åº¦æ’åºï¼Œé•¿åº¦ä¸€æ ·æŒ‰å­—å…¸åº
TreeSet<String> ts = new TreeSet<>((s1, s2) -> {
    int lenDiff = s1.length() - s2.length();
    return lenDiff == 0 ? s1.compareTo(s2) : lenDiff;
});

```

---

## æ€»ç»“:

#### å¯¹æ¯”è¡¨:

|é›†åˆç±»å‹|**æœ‰åºæ€§**|**å”¯ä¸€æ€§**|**åº•å±‚ç»“æ„**|**åº”ç”¨åœºæ™¯**|
| ----------| ------| ---------| -------------------| --------------------------------------|
|**HashSet**|æ— åº|âœ… å”¯ä¸€|å“ˆå¸Œè¡¨|**æœ€å¸¸ç”¨**ï¼Œä»…ä»…ä¸ºäº†å»é‡ï¼Œé€Ÿåº¦æœ€å¿«ã€‚|
|**LinkedHashSet**|**æ’å…¥æœ‰åº**|âœ… å”¯ä¸€|å“ˆå¸Œè¡¨ + åŒå‘é“¾è¡¨|éœ€è¦å»é‡ï¼Œä¸”éœ€è¦ä¿ç•™åŸæœ¬çš„è¾“å…¥é¡ºåºã€‚|
|**TreeSet**|**æ•°å€¼æ’åº**|âœ… å”¯ä¸€|çº¢é»‘æ ‘|éœ€è¦å»é‡ï¼Œä¸”éœ€è¦æŒ‰ç…§å¤§å°/è§„åˆ™æ’åºã€‚|

**å¤ä¹ å»ºè®®**ï¼š  
é‡ç‚¹æŠŠ **HashSet çš„** **â€‹`hashCode`â€‹**â€‹  **+**  **â€‹`equals`â€‹**â€‹ **å»é‡æµç¨‹** èƒŒä¸‹æ¥ï¼Œè¿™æ˜¯é¢è¯•å®˜æœ€å–œæ¬¢é—®çš„ç»†èŠ‚ã€‚

- ##### reeSeté›†åˆçš„ç‰¹ç‚¹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ

  å¯æ’åºã€ä¸é‡å¤ã€æ— ç´¢å¼•  
  åº•å±‚åŸºäºçº¢é»‘æ ‘å®ç°æ’åºï¼Œå¢åˆ æ”¹æŸ¥æ€§èƒ½è¾ƒå¥½
- ##### TreeSeté›†åˆå¯¹è‡ªå®šä¹‰ç±»å‹çš„å¯¹è±¡æ’åºï¼Œæœ‰å‡ ç§æ–¹å¼æŒ‡å®šæ¯”è¾ƒè§„åˆ™ï¼Ÿ

  2ç§ã€‚ç±»å®ç°Comparableæ¥å£ï¼Œé‡å†™æ¯”è¾ƒè§„åˆ™ã€‚é›†åˆè‡ªå®šä¹‰Comparatoræ¯”è¾ƒå™¨å¯¹è±¡ï¼Œé‡å†™æ¯”è¾ƒè§„åˆ™ã€‚

- #### 1ã€å¦‚æœå¸Œæœ›è®°ä½å…ƒç´ çš„æ·»åŠ é¡ºåºï¼Œéœ€è¦å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œåˆè¦é¢‘ç¹çš„æ ¹æ®ç´¢å¼•æŸ¥è¯¢æ•°æ®ï¼Ÿ

  ç”¨ArrayListé›†åˆï¼ˆæœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•ï¼‰ï¼Œåº•å±‚åŸºäºæ•°ç»„çš„ã€‚ï¼ˆå¸¸ç”¨ï¼‰
- #### 2ã€å¦‚æœå¸Œæœ›è®°ä½å…ƒç´ çš„æ·»åŠ é¡ºåºï¼Œä¸”å¢åˆ é¦–å°¾æ•°æ®çš„æƒ…å†µè¾ƒå¤šï¼Ÿ

  ç”¨LinkedListé›†åˆï¼ˆæœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•ï¼‰ï¼Œåº•å±‚åŸºäºåŒé“¾è¡¨å®ç°çš„ã€‚
- #### 3.å¦‚æœä¸åœ¨æ„å…ƒç´ é¡ºåºï¼Œä¹Ÿæ²¡æœ‰é‡å¤å…ƒç´ éœ€è¦å­˜å‚¨ï¼Œåªå¸Œæœ›å¢åˆ æ”¹æŸ¥éƒ½å¿«ï¼Ÿ

  ç”¨HashSeté›†åˆï¼ˆæ— åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼‰ï¼Œåº•å±‚åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ã€‚ ï¼ˆå¸¸ç”¨ï¼‰

- #### 4.å¦‚æœå¸Œæœ›è®°ä½å…ƒç´ çš„æ·»åŠ é¡ºåºï¼Œä¹Ÿæ²¡æœ‰é‡å¤å…ƒç´ éœ€è¦å­˜å‚¨ï¼Œä¸”å¸Œæœ›å¢åˆ æ”¹æŸ¥éƒ½å¿«ï¼Ÿ

  ç”¨LinkedHashSeté›†åˆï¼ˆæœ‰åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼‰ï¼Œ åº•å±‚åŸºäºå“ˆå¸Œè¡¨å’ŒåŒé“¾è¡¨ã€‚

- #### 5.å¦‚æœè¦å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼Œä¹Ÿæ²¡æœ‰é‡å¤å…ƒç´ éœ€è¦å­˜å‚¨ï¼Ÿä¸”å¸Œæœ›å¢åˆ æ”¹æŸ¥éƒ½å¿«ï¼Ÿ

  ç”¨TreeSeté›†åˆï¼ŒåŸºäºçº¢é»‘æ ‘å®ç°ã€‚

---

# MAP:

---

### ğŸ—ºï¸ 1. Map é›†åˆæ¦‚è¿° (Overview)

- â€‹**å®šä¹‰**â€‹ï¼š`Map<K, V>`â€‹ æ˜¯ä¸€ä¸ªâ€‹**åŒåˆ—é›†åˆ**â€‹ï¼Œå­˜å‚¨çš„æ˜¯ â€‹**é”®å€¼å¯¹ (Key-Value Pair)** ã€‚
- â€‹**æ ¸å¿ƒç‰¹ç‚¹**ï¼š

  1. â€‹**Key (é”®) æ— åºã€ä¸é‡å¤**ï¼šé”®æ˜¯å”¯ä¸€çš„ï¼ˆåƒ Setï¼‰ã€‚
  2. â€‹**Value (å€¼) å¯é‡å¤**ï¼šå€¼å¯ä»¥ä¸€æ ·ï¼ˆåƒ Listï¼‰ã€‚
  3. â€‹**ä¸€ä¸€å¯¹åº”**ï¼šä¸€ä¸ªé”®åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚
- â€‹**ç”Ÿæ´»æ¡ˆä¾‹**ï¼š

  - å•†å“ ID (Key) -\> å•†å“ä¿¡æ¯ (Value)
  - å­¦å· (Key) -\> å­¦ç”Ÿå§“å (Value)
- **HashMapï¼ˆç”±é”®å†³å®šç‰¹ç‚¹ï¼‰** : æ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•ï¼›  ï¼ˆç”¨çš„æœ€å¤šï¼‰  
  **LinkedHashMap ï¼ˆç”±é”®å†³å®šç‰¹ç‚¹ï¼‰** :ç”±é”®å†³å®šçš„ç‰¹ç‚¹ï¼šæœ‰åºã€ä¸é‡å¤ã€æ— ç´¢å¼•ã€‚  
  **TreeMap ï¼ˆç”±é”®å†³å®šç‰¹ç‚¹ï¼‰** :æŒ‰ç…§å¤§å°é»˜è®¤å‡åºæ’åºã€ä¸é‡å¤ã€æ— ç´¢å¼•ã€‚
- **æ³¨æ„ï¼š** Mapç³»åˆ—é›†åˆçš„ç‰¹ç‚¹éƒ½æ˜¯ç”±é”®å†³å®šçš„ï¼Œå€¼åªæ˜¯ä¸€ä¸ªé™„å±å“ï¼Œ**å€¼æ˜¯ä¸åšè¦æ±‚çš„**

---

### ğŸ› ï¸ 2. Map é›†åˆçš„å¸¸ç”¨æ–¹æ³• (API)

â€‹`Map` æ¥å£ä¸­çš„æ–¹æ³•ä¸»è¦å›´ç»•â€œé”®å€¼å¯¹â€è¿›è¡Œæ“ä½œã€‚

|**æ“ä½œç±»å‹**|**æ–¹æ³•å**|**è¯´æ˜**|**æ³¨æ„ç‚¹ (å‘)**|||||
| --| ------| ------------------| ---------------------------------------------| --| --| --| --|
|**å¢ / æ”¹**|â€‹`V put(K key, V value)`|æ·»åŠ /ä¿®æ”¹å…ƒç´ |1. å¦‚æœé”®ä¸å­˜åœ¨ï¼Œå­˜å…¥å¹¶è¿”å›`null`ã€‚<br /><br />2.â€‹**å¦‚æœé”®å·²å­˜åœ¨ï¼Œè¦†ç›–æ—§å€¼ï¼Œå¹¶è¿”å›æ—§å€¼**ã€‚|||||
|**åˆ **|â€‹`V remove(Object key)`|æ ¹æ®é”®åˆ é™¤|åˆ é™¤æˆåŠŸè¿”å›è¢«åˆ çš„å€¼ï¼Œå¦åˆ™è¿”å›`null`ã€‚|||||
||â€‹`void clear()`|æ¸…ç©ºé›†åˆ|-|||||
|**æŸ¥**|â€‹`V get(Object key)`|æ ¹æ®é”®è·å–å€¼|é”®ä¸å­˜åœ¨è¿”å›`null`ã€‚|||||
||â€‹`int size()`|è·å–é”®å€¼å¯¹ä¸ªæ•°|-|||||
||â€‹`boolean containsKey(Object key)`|åˆ¤æ–­æ˜¯å¦åŒ…å«æŸé”®|â€‹**é«˜é¢‘ä½¿ç”¨**ï¼Œç”¨æ¥æŸ¥é‡ã€‚|||||
||â€‹`boolean containsValue(Object value)`|åˆ¤æ–­æ˜¯å¦åŒ…å«æŸå€¼|-|||||
|**è·å–é›†åˆ**|â€‹`Set<K> keySet()`|**è·å–æ‰€æœ‰é”®**|è¿”å›ä¸€ä¸ª Set é›†åˆã€‚|||||
||â€‹`Collection<V> values()`|è·å–æ‰€æœ‰å€¼|è¿”å›ä¸€ä¸ª Collection é›†åˆï¼ˆå› ä¸ºå€¼å¯é‡å¤ï¼‰ã€‚|||||
||â€‹`Set<Map.Entry<K,V>> entrySet()`|**è·å–æ‰€æœ‰é”®å€¼å¯¹**|è¿”å› Entry å¯¹è±¡çš„ Set é›†åˆã€‚|||||

---

### ğŸ”„ 3. Map é›†åˆçš„éå†æ–¹å¼ (é‡ç‚¹)

Map æ²¡æœ‰è¿­ä»£å™¨ï¼Œä¹Ÿä¸èƒ½ç›´æ¥ç”¨å¢å¼º for å¾ªç¯ï¼ˆå› ä¸ºå®ƒä¸æ˜¯ Collection çš„å­æ¥å£ï¼‰ã€‚æˆ‘ä»¬å¿…é¡»é€šè¿‡**ä¸‰ç§â€œä¸­ä»‹â€æ–¹å¼**æ¥éå†ã€‚

#### æ–¹å¼ä¸€ï¼šé”®æ‰¾å€¼ (KeySet)

- **æ€è·¯**ï¼šå…ˆæ‹¿æ‰€æœ‰çš„ Keyï¼Œå†é€šè¿‡ `get(key)` æ‰¾ Valueã€‚
- |æ–¹æ³•åç§°|è¯´æ˜|
  | -------------------------------| ----------------------|
  |public Set\<K\>keySet()|è·å–æ‰€æœ‰é”®çš„é›†åˆ|
  |public V get(Object key)|æ ¹æ®é”®è·å–å…¶å¯¹åº”çš„å€¼|
- ```java
  ä»£ç ï¼š// 1. è·å–æ‰€æœ‰é”®çš„ Set é›†åˆ
  Set<String> keys = map.keySet();
  // 2. éå†é”®
  for (String key : keys) {
      // 3. æ ¹æ®é”®æ‰¾å€¼
      Integer value = map.get(key);
      System.out.println(key + " = " + value);
  }
  ```

#### æ–¹å¼äºŒï¼šé”®å€¼å¯¹å¯¹è±¡ (EntrySet) â€”â€” *æ•ˆç‡æœ€é«˜*

- **æ€è·¯**ï¼šç›´æ¥æŠŠ map é‡Œçš„â€œé”®å€¼å¯¹â€ä½œä¸ºä¸€ä¸ªæ•´ä½“ (`Map.Entry` å¯¹è±¡) å–å‡ºæ¥ã€‚
- |Map**æä¾›çš„æ–¹æ³•**|è¯´æ˜|
  | ------------------------------------------------| --------------------------|
  |Set\<Map.Entry\<K, V\>\>entrySet()|è·å–æ‰€æœ‰â€œé”®å€¼å¯¹â€çš„é›†åˆ|
- |Map.Entry**æä¾›çš„æ–¹æ³•**|è¯´æ˜|
  | -------------| --------|
  |KgetKey()|è·å–é”®|
  |VgetValue()|è·å–å€¼|
- â€‹**ä¼˜ç‚¹**â€‹ï¼šä¸€æ¬¡å–å‡ºä¸€å¯¹ï¼Œä¸ç”¨å›æŸ¥ï¼Œå¤§æ•°æ®é‡ä¸‹â€‹**æ•ˆç‡ä¼˜äºæ–¹å¼ä¸€**ã€‚
- ```java
  ä»£ç ï¼š// 1. è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„ Set é›†åˆ
  Set<Map.Entry<String, Integer>> entries = map.entrySet();
  // 2. éå† Entry å¯¹è±¡
  for (Map.Entry<String, Integer> entry : entries) {
      String key = entry.getKey();
      Integer value = entry.getValue();
      System.out.println(key + " = " + value);
  }
  ```

#### æ–¹å¼ä¸‰ï¼šLambda è¡¨è¾¾å¼ (JDK 8+) â€”â€” *æœ€ä¼˜é›…*

- |æ–¹æ³•åç§°|è¯´æ˜|
  | ----------------------------------------------------------------------| -----------------------|
  |default voidforEach(BiConsumer\<? super K, ? super V\> action)|ç»“åˆlambdaéå†Mapé›†åˆ|

- ```java
  //ä»£ç ï¼š//
  map.forEach((k, v) -> {
      System.out.println(k + " = " + v);
  });
  ```

---

### ğŸ­ 4. Map é›†åˆçš„å®ç°ç±» (Implementation Classes)

è¿™äº›å®ç°ç±»çš„ç‰¹ç‚¹ï¼Œè·Ÿæˆ‘ä»¬åˆšæ‰å­¦çš„ Set é›†åˆâ€‹**ä¸€æ¨¡ä¸€æ ·**ï¼ˆå› ä¸º HashSet åº•å±‚å°±æ˜¯ HashMapï¼ŒTreeSet åº•å±‚å°±æ˜¯ TreeMapï¼‰ã€‚

#### A. HashMap (æœ€å¸¸ç”¨)

- â€‹**ç‰¹ç‚¹**ï¼š

  - â€‹**æ— åº**ã€ä¸é‡å¤ï¼ˆæŒ‡ Keyï¼‰ã€æ— ç´¢å¼•ã€‚
  - â€‹**å…è®¸ null**â€‹ï¼šå¯ä»¥å­˜ä¸€ä¸ª `null`â€‹ é”®å’Œå¤šä¸ª `null` å€¼ã€‚
- â€‹**åº•å±‚åŸç†**â€‹ï¼šâ€‹**å“ˆå¸Œè¡¨**ï¼ˆJDK 8: æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼‰ã€‚

  - â€‹*å›é¡¾*â€‹ï¼šä¾èµ– Key çš„ `hashCode()`â€‹ å’Œ `equals()` æ–¹æ³•å»é‡ã€‚

#### B. LinkedHashMap

- â€‹**ç‰¹ç‚¹**â€‹ï¼šâ€‹**æœ‰åº**ï¼ˆä¿è¯å­˜å–é¡ºåºï¼‰ã€ä¸é‡å¤ï¼ˆæŒ‡ Keyï¼‰ã€æ— ç´¢å¼•ã€‚
- â€‹**åº•å±‚åŸç†**â€‹ï¼šå“ˆå¸Œè¡¨ + â€‹**åŒå‘é“¾è¡¨**ï¼ˆç»´æŠ¤æ’å…¥é¡ºåºï¼‰ã€‚

#### C. TreeMap

- â€‹**ç‰¹ç‚¹**â€‹ï¼šâ€‹**å¯æ’åº**ï¼ˆæŒ‰ Key çš„å¤§å°ï¼‰ã€ä¸é‡å¤ï¼ˆæŒ‡ Keyï¼‰ã€æ— ç´¢å¼•ã€‚
- â€‹**åº•å±‚åŸç†**â€‹ï¼šâ€‹**çº¢é»‘æ ‘**ã€‚
- â€‹**æ’åºè§„åˆ™**ï¼š

  - Key å¿…é¡»å®ç° `Comparable` æ¥å£ã€‚
  - æˆ–è€…åˆ›å»º TreeMap æ—¶ä¼ å…¥ `Comparator` æ¯”è¾ƒå™¨ã€‚

---

### ğŸ†š æ€»ç»“å¯¹æ¯”

|**å®ç°ç±»**|**Key çš„æœ‰åºæ€§**|**Key çš„æ•°æ®ç»“æ„**|**åº”ç”¨åœºæ™¯**|||||
| --| --| -------------------| ---------------------------------------| --| --| --| --|
|**HashMap**|**æ— åº**|å“ˆå¸Œè¡¨|â€‹**90% çš„åœºæ™¯**ã€‚å¢åˆ æ”¹æŸ¥æ€§èƒ½æœ€å¿«ã€‚|||||
|**LinkedHashMap**|**æ’å…¥æœ‰åº**|å“ˆå¸Œè¡¨ + åŒå‘é“¾è¡¨|éœ€è¦ Key æŒ‰ç…§å­˜å…¥é¡ºåºæ’åˆ—æ—¶ã€‚|||||
|**TreeMap**|**æ’åº (å‡åº/é™åº)**|çº¢é»‘æ ‘|éœ€è¦ Key æŒ‰ç…§æ•°å€¼å¤§å°æˆ–å­—å…¸åºæ’åˆ—æ—¶ã€‚|||||

â€‹**å¤ä¹ å°è´´å£«**ï¼š

å­¦ä¹  Map çš„æ—¶å€™ï¼Œä¸è¦æŠŠå®ƒå½“æˆæ–°çŸ¥è¯†ï¼Œ**æŠŠå®ƒå½“æˆâ€œå¸¦äº† Value æ‹–æ²¹ç“¶â€çš„ Set** å°±å¯ä»¥äº†ã€‚é€»è¾‘å®Œå…¨äº’é€šï¼

â€

---

# Streamæµ:

**ç®€å•æ¥è¯´ï¼ŒStream å°±æ˜¯ä¸€æ¡**â€œæ•°æ®æµæ°´çº¿â€**ã€‚**

---

### ğŸŒŠ 1. ä»€ä¹ˆæ˜¯ Stream æµï¼Ÿ

- â€‹**æ ¸å¿ƒæ€æƒ³**ï¼š

  - â€‹**ä¸å­˜æ•°æ®**ï¼šStream ä¸åƒ List é‚£æ ·å­˜å‚¨æ•°æ®ï¼Œå®ƒåªæ˜¯è´Ÿè´£æ¬è¿å’Œå¤„ç†æ•°æ®ã€‚
  - â€‹**ä¸æ”¹å˜æº**â€‹ï¼šStream åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œ**ä¸ä¼šä¿®æ”¹**åŸå§‹é›†åˆä¸­çš„æ•°æ®ï¼Œè€Œæ˜¯ç”Ÿæˆæ–°çš„ç»“æœã€‚
  - â€‹**æµæ°´çº¿ä½œä¸š**â€‹ï¼šç”±  **â€œæ•°æ®æº ->**  **ä¸­é—´æ“ä½œ ->**  **ç»ˆç»“æ“ä½œâ€**  ä¸‰æ­¥ç»„æˆã€‚
- â€‹**ä¸€å¥è¯æ¦‚æ‹¬**ï¼šStream ç»“åˆ Lambda è¡¨è¾¾å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬åƒå†™ SQL è¯­å¥ä¸€æ ·å»æ“ä½œ Java é›†åˆï¼ˆæ¯”å¦‚è¿‡æ»¤ã€æ’åºã€æ˜ å°„ï¼‰ã€‚

---

### ğŸ› ï¸ 2. Stream æµçš„ä¸‰æ­¥èµ° (æ ‡å‡†èŒƒå¼)

ä¸ç®¡å¤šå¤æ‚çš„æµæ“ä½œï¼Œæ°¸è¿œé€ƒä¸å‡ºè¿™ä¸‰æ­¥ï¼š

1. **è·å–æµ** (Source)ï¼šæŠŠé›†åˆã€æ•°ç»„å˜æˆæµã€‚
2. **ä¸­é—´æ“ä½œ** (Intermediate)ï¼šæµæ°´çº¿åŠ å·¥ï¼ˆè¿‡æ»¤ã€æ’åºã€å»é‡...ï¼‰ï¼Œæ”¯æŒé“¾å¼ç¼–ç¨‹ã€‚
3. **ç»ˆç»“æ“ä½œ** (Terminal)ï¼šå‡ºç»“æœï¼ˆè½¬æˆ Listã€æ‰“å°ã€ç»Ÿè®¡æ•°é‡ï¼‰ã€‚

> â€‹**æ³¨æ„**â€‹ï¼šä¸­é—´æ“ä½œæ˜¯**æ‡’åŠ è½½ (Lazy)**  çš„ã€‚å¦‚æœæ²¡æœ‰ç»ˆç»“æ“ä½œï¼Œä¸­é—´æ“ä½œâ€‹**ä¸€è¡Œéƒ½ä¸ä¼šæ‰§è¡Œ**ï¼

---

### âš¡ 3. å¸¸ç”¨ API é€ŸæŸ¥è¡¨

#### ç¬¬ä¸€æ­¥ï¼šè·å–æµ

- â€‹**Collection (List/Set)** â€‹: `list.stream()`
- â€‹**Map**: å¿…é¡»å…ˆè½¬æˆå•åˆ—æ‰èƒ½æµåŒ–ã€‚

  - â€‹`map.keySet().stream()`
  - â€‹`map.entrySet().stream()`
- â€‹**æ•°ç»„**â€‹: `Arrays.stream(arr)`â€‹ æˆ– `Stream.of(arr)`

#### ç¬¬äºŒæ­¥ï¼šä¸­é—´æ“ä½œ (åŠ å·¥)

|**æ–¹æ³•å**|**è¯´æ˜**|**ç¤ºä¾‹**||||
| ------| ----------------------------| -----------------| --| --| --|
|â€‹`filter(Predicate)`|â€‹**è¿‡æ»¤**ï¼šä¿ç•™ç¬¦åˆæ¡ä»¶çš„æ•°æ®|â€‹`filter(s -> s.startsWith("å¼ "))`||||
|â€‹`map(Function)`|â€‹**è½¬æ¢**ï¼šæŠŠ A ç±»å‹å˜æˆ B ç±»å‹|â€‹`map(s -> Integer.parseInt(s))`||||
|â€‹`sorted()`|**æ’åº**|â€‹`sorted()`â€‹(è‡ªç„¶) æˆ–`sorted(Comparator)`||||
|â€‹`distinct()`|**å»é‡**(ä¾èµ– hashCode/equals)|â€‹`distinct()`||||
|â€‹`limit(long n)`|**æˆªå–**å‰ n ä¸ª|â€‹`limit(3)`||||
|â€‹`skip(long n)`|**è·³è¿‡**å‰ n ä¸ª|â€‹`skip(2)`||||

#### ç¬¬ä¸‰æ­¥ï¼šç»ˆç»“æ“ä½œ (ç»“æœ)

|**æ–¹æ³•å**|**è¯´æ˜**|**ç¤ºä¾‹**||||
| ------| ---------------------| ------| --| --| --|
|â€‹`forEach(Consumer)`|**éå†**|â€‹`forEach(s -> System.out.println(s))`||||
|â€‹`count()`|**ç»Ÿè®¡**ä¸ªæ•°|â€‹`long count = stream.count();`||||
|â€‹`collect(Collector)`|**æ”¶é›†**(è½¬å›é›†åˆ) ğŸ”¥æœ€å¸¸ç”¨|â€‹`collect(Collectors.toList())`||||

---

### ğŸ’» 4. ä»£ç å®æˆ˜å¯¹æ¯”

â€‹**éœ€æ±‚**ï¼šæœ‰ä¸€ä¸ªåå­—åˆ—è¡¨ï¼Œæ‰¾å‡ºæ‰€æœ‰â€œå§“å¼ â€ä¸”â€œåå­—æ˜¯ 3 ä¸ªå­—â€çš„äººï¼Œæ‰“å°å‡ºæ¥ã€‚

#### âŒ è€å†™æ³• (For å¾ªç¯)

Java

```
List<String> list = Arrays.asList("å¼ æ— å¿Œ", "å‘¨èŠ·è‹¥", "å¼ ä¸‰ä¸°", "èµµæ•", "å¼ ä¸‰");
List<String> zhangList = new ArrayList<>();

for (String name : list) {
    if (name.startsWith("å¼ ") && name.length() == 3) {
        zhangList.add(name);
    }
}
for (String name : zhangList) {
    System.out.println(name);
}
```

#### âœ… æ–°å†™æ³• (Stream æµ)

Java

```
List<String> list = Arrays.asList("å¼ æ— å¿Œ", "å‘¨èŠ·è‹¥", "å¼ ä¸‰ä¸°", "èµµæ•", "å¼ ä¸‰");

list.stream()
    .filter(name -> name.startsWith("å¼ ")) // 1. è¿‡æ»¤å§“å¼ 
    .filter(name -> name.length() == 3)    // 2. è¿‡æ»¤3ä¸ªå­—
    .forEach(name -> System.out.println(name)); // 3. ç»ˆç»“ï¼šæ‰“å°
// ç”šè‡³å¯ä»¥ç”¨æ–¹æ³•å¼•ç”¨ï¼š .forEach(System.out::println);
```

---

### ğŸ§© 5. Map æ–¹æ³• (æ˜ å°„)ã€éš¾ç‚¹ã€‘ä¸å…¨æµç¨‹æ€»ç»“

ä»¥ä¸‹æ¶µç›–äº† Stream æµçš„ **è·å–**ã€**ä¸­é—´æ“ä½œ**ã€**ç»ˆç»“æ“ä½œ** ä»¥åŠ **ç›¸å…³å®ä½“ç±»é…ç½®** å››å¤§æ ¸å¿ƒæ¿å—ã€‚

---

# ğŸŒŠ Java Stream æµå­¦ä¹ ç¬”è®°

Stream æµæ˜¯ Java 8 å¼•å…¥çš„ç‰¹æ€§ï¼Œå®ƒå°±åƒä¸€æ¡â€‹**æµæ°´çº¿**ï¼Œç”¨äºæ“ä½œé›†åˆæˆ–æ•°ç»„ä¸­çš„æ•°æ®ï¼ˆè¿‡æ»¤ã€æ’åºã€æ˜ å°„ã€æ”¶é›†ç­‰ï¼‰ã€‚

â€‹**æ ¸å¿ƒæ€æƒ³**ï¼šä¸æ”¹å˜æºæ•°æ®ï¼Œè€Œæ˜¯ç”Ÿæˆæ–°çš„ç»“æœã€‚

---

## 1ï¸âƒ£ è·å– Stream æµçš„æ–¹å¼ (StreamDemo2)

Stream æµä¸»è¦é’ˆå¯¹ Collection é›†åˆã€Map é›†åˆå’Œæ•°ç»„ã€‚

### 1. Collection å•åˆ—é›†åˆ

ç›´æ¥è°ƒç”¨é›†åˆæä¾›çš„ `.stream()` æ–¹æ³•ã€‚

Java

```
Collection<String> list = new ArrayList<>();
Stream<String> s1 = list.stream();
```

### 2. Map åŒåˆ—é›†åˆ (é‡ç‚¹)

â€‹**Map æœ¬èº«æ²¡æœ‰**  **â€‹`.stream()`â€‹** â€‹ **æ–¹æ³•**ï¼Œå¿…é¡»å…ˆè½¬æ¢æˆå•åˆ—é›†åˆï¼ˆSet æˆ– Collectionï¼‰æ‰èƒ½è·å–æµã€‚

- â€‹**è·å–é”®æµ**â€‹ï¼š`map.keySet().stream()`
- â€‹**è·å–å€¼æµ**â€‹ï¼š`map.values().stream()`
- â€‹**è·å–é”®å€¼å¯¹æµ**â€‹ï¼š`map.entrySet().stream()`

### 3. æ•°ç»„ & æ•£æ•°æ®

- **æ•°ç»„**ï¼š`Arrays.stream(æ•°ç»„å)`â€‹ æˆ– `Stream.of(æ•°ç»„å)`ï¼Œ

  å¯¹äºâ€‹**åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„**â€‹ï¼ˆ`int[]`â€‹, `long[]`â€‹, `double[]`â€‹ï¼‰ï¼Œåƒä¸‡ä¸è¦ç”¨ `Stream.of()`ã€‚

  **è¯·ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ ‡å‡†å†™æ³•ï¼Œç›´æ¥è·å–** **â€‹`IntStream`â€‹**â€‹ **ï¼šArrays.stream (æœ€å¸¸ç”¨)ï¼ŒIntStream.of**
- **æ•£æ•°æ®**ï¼š`Stream.of("æ•°æ®1", "æ•°æ®2", ...)`

  â€

---

## 2ï¸âƒ£ å¸¸ç”¨ä¸­é—´æ–¹æ³• (StreamDemo3)

ä¸­é—´æ“ä½œä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Stream æµï¼Œæ”¯æŒâ€‹**é“¾å¼ç¼–ç¨‹**ã€‚

|**æ–¹æ³•å**|**è¯´æ˜**|**ä»£ç ç¤ºä¾‹**||||
| ------| -------------------------------| --------------------------------| --| --| --|
|â€‹**â€‹`filter`â€‹**|â€‹**è¿‡æ»¤**ï¼šä¿ç•™ç¬¦åˆæ¡ä»¶çš„æ•°æ®|â€‹`list.stream().filter(s -> s.startsWith("å¼ "))`||||
|â€‹**â€‹`sorted`â€‹**|â€‹**æ’åº**ï¼šé»˜è®¤å‡åºæˆ–è‡ªå®šä¹‰æ¯”è¾ƒå™¨|1. é»˜è®¤:`.sorted()`<br /><br />2. é™åº:`.sorted((s1, s2) -> Double.compare(s2, s1))`||||
|â€‹**â€‹`limit`â€‹**|â€‹**æˆªå–**ï¼šä¿ç•™å‰ n ä¸ª|â€‹`.limit(2)`||||
|â€‹**â€‹`skip`â€‹**|â€‹**è·³è¿‡**ï¼šè·³è¿‡å‰ n ä¸ª|â€‹`.skip(2)`||||
|â€‹**â€‹`distinct`â€‹**|â€‹**å»é‡**ï¼šä¾èµ– hashCode å’Œ equals|â€‹`.distinct()`(éœ€é‡å†™å¯¹è±¡æ–¹æ³•)||||
|â€‹**â€‹`map`â€‹**|â€‹**æ˜ å°„/åŠ å·¥**ï¼šæŠŠä¸€ç§æ•°æ®å˜æˆå¦ä¸€ç§|â€‹`.map(s -> "åŠ å·¥å:" + s)`â€‹(å¦‚ Teacher -\> String)||||
|â€‹**â€‹`concat`â€‹**|â€‹**åˆå¹¶**ï¼šå°†ä¸¤ä¸ªæµåˆå¹¶ä¸ºä¸€ä¸ª|â€‹`Stream.concat(s1, s2)`||||

> â€‹ **âš ï¸ æ³¨æ„**â€‹ï¼š`distinct()`â€‹ å»é‡è‡ªå®šä¹‰å¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡ç±»ï¼ˆå¦‚ `Teacher`â€‹ï¼‰å¿…é¡»é‡å†™ `hashCode()`â€‹ å’Œ `equals()` æ–¹æ³•ã€‚

---

## 3ï¸âƒ£ å¸¸ç”¨ç»ˆç»“æ–¹æ³• (StreamDemo4)

ç»ˆç»“æ“ä½œæ˜¯æµçš„æœ€åä¸€æ­¥ï¼Œæ‰§è¡Œåæµå°±**å…³é—­**äº†ï¼Œæ— æ³•å†ä½¿ç”¨ã€‚

### 1. æŸ¥æ‰¾ä¸ç»Ÿè®¡

- â€‹**â€‹`forEach`â€‹**ï¼šéå†ã€‚
- â€‹**â€‹`count`â€‹**â€‹ï¼šç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°ï¼Œè¿”å› `long`ã€‚
- â€‹**â€‹`max`â€‹**â€‹  **/**  **â€‹`min`â€‹**ï¼šè·å–æœ€å¤§/æœ€å°å€¼ã€‚

  - è¿”å›çš„æ˜¯ `Optional<T>`â€‹ å¯¹è±¡ï¼ˆé˜²æ­¢ç©ºæŒ‡é’ˆï¼‰ï¼Œéœ€è¦è°ƒç”¨ `.get()` è·å–çœŸå®æ•°æ®ã€‚
  - ```java
    ä»£ç ç¤ºä¾‹ï¼š// è·å–æœ€é«˜è–ªæ°´çš„è€å¸ˆ
    Optional<Teacher> max = teachers.stream().max((t1, t2) -> Double.compare(t1.getSalary(), t2.getSalary()));
    Teacher maxTeacher = max.get();
    ```

### 2. æ”¶é›† (Collect) â€”â€” æœ€é‡è¦

å°†æµå¤„ç†åçš„ç»“æœæ”¾å›é›†åˆä¸­ã€‚

- **æ”¶é›†åˆ° List**ï¼š
- ```java
  List<String> list = stream.collect(Collectors.toList());
  ```
- **æ”¶é›†åˆ° Set** (è‡ªåŠ¨å»é‡)ï¼š
- ```java
  Set<String> set = stream.collect(Collectors.toSet());
  ```
- **æ”¶é›†åˆ° Array**ï¼š
- ```java
  Object[] array = stream.toArray();
  ```
- **æ”¶é›†åˆ° Map** (æœ€å¤æ‚)ï¼š

  ```java

  éœ€è¦æŒ‡å®šè°åš Keyï¼Œè°åš Valueã€‚
  // Key: åå­—, Value: è–ªæ°´
  Map<String, Double> map = teachers.stream()
      .collect(Collectors.toMap(Teacher::getName, Teacher::getSalary));
  ```

  > â€‹ **âš ï¸ æ³¨æ„**ï¼šæ”¶é›†åˆ° Map æ—¶ï¼Œå¦‚æœ Key é‡å¤ä¼šæŠ¥é”™ï¼ˆDuplicate Keyï¼‰ã€‚
  >

---

## 4ï¸âƒ£ å®ä½“ç±»é…åˆ (Teacher.java)

åœ¨ä½¿ç”¨ Stream æµè¿›è¡Œæ’åºæ—¶ï¼Œæœ‰ä¸¤ç§æ–¹å¼æŒ‡å®šè§„åˆ™ï¼š

1. â€‹**å†…éƒ¨æ¯”è¾ƒå™¨ (Comparable)** ï¼š

   - è®©å®ä½“ç±»å®ç° `Comparable<T>` æ¥å£ã€‚
   - é‡å†™ `compareTo` æ–¹æ³•ã€‚
   - â€‹`Stream.sorted()` æ— å‚æ—¶é»˜è®¤è°ƒç”¨æ­¤é€»è¾‘ã€‚
   - ```java
     @Override
     public int compareTo(Teacher o) {
         return this.getAge() - o.getAge(); // æŒ‰å¹´é¾„å‡åº
     }
     ```
2. â€‹**å¤–éƒ¨æ¯”è¾ƒå™¨ (Comparator)** ï¼š

   - åœ¨ Stream è°ƒç”¨æ—¶ç›´æ¥ä¼ å…¥ Lambda è¡¨è¾¾å¼ã€‚
   - ä¼˜å…ˆçº§é«˜äºå†…éƒ¨æ¯”è¾ƒå™¨ã€‚
   - ```java
     	stream.sorted((t1, t2) -> Double.compare(t2.getSalary(), t1.getSalary())) // æŒ‰è–ªæ°´é™åº
     ```

```java
package com.itheima.demo3stream;

import java.util.ArrayList;
import java.util.List;
import java.util.stream.Stream;

public class StreamDemo3 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šæŒæ¡Streamæä¾›çš„å¸¸ç”¨çš„ä¸­é—´æ–¹æ³•ï¼Œå¯¹æµä¸Šçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼ˆè¿”å›æ–°æµï¼šæ”¯æŒé“¾å¼ç¼–ç¨‹ï¼‰
        List<String> list = new ArrayList<>();
        list.add("å¼ æ— å¿Œ");
        list.add("å‘¨èŠ·è‹¥");
        list.add("èµµæ•");
        list.add("å¼ å¼º");
        list.add("å¼ ä¸‰ä¸°");
        list.add("å¼ ç¿ å±±");

        // 1ã€è¿‡æ»¤æ–¹æ³•
        list.stream().filter(s -> s.startsWith("å¼ ") &&  s.length() == 3).forEach(System.out::println);

        // 2ã€æ’åºæ–¹æ³•ã€‚
        List<Double> scores = new ArrayList<>();
        scores.add(88.6);
        scores.add(66.6);
        scores.add(66.6);
        scores.add(77.6);
        scores.add(77.6);
        scores.add(99.6);
        scores.stream().sorted().forEach(System.out::println); // é»˜è®¤æ˜¯å‡åºã€‚
        System.out.println("--------------------------------------------------");

        scores.stream().sorted((s1, s2) -> Double.compare(s2, s1)).forEach(System.out::println); // é™åº
        System.out.println("--------------------------------------------------");

        scores.stream().sorted((s1, s2) -> Double.compare(s2, s1)).limit(2).forEach(System.out::println); // åªè¦å‰2å
        System.out.println("--------------------------------------------------");

        scores.stream().sorted((s1, s2) -> Double.compare(s2, s1)).skip(2).forEach(System.out::println); // è·³è¿‡å‰2å
        System.out.println("--------------------------------------------------");

        // å¦‚æœå¸Œæœ›è‡ªå®šä¹‰å¯¹è±¡èƒ½å¤Ÿå»é‡å¤ï¼Œé‡å†™å¯¹è±¡çš„hashCodeå’Œequalsæ–¹æ³•ï¼Œæ‰å¯ä»¥å»é‡å¤ï¼
        scores.stream().sorted((s1, s2) -> Double.compare(s2, s1)).distinct().forEach(System.out::println); // å»é‡å¤

        // æ˜ å°„/åŠ å·¥æ–¹æ³•ï¼š æŠŠæµä¸ŠåŸæ¥çš„æ•°æ®æ‹¿å‡ºæ¥å˜æˆæ–°æ•°æ®åˆæ”¾åˆ°æµä¸Šå»ã€‚
        scores.stream().map(s -> "åŠ 10åˆ†åï¼š" + (s + 10)).forEach(System.out::println);

        // åˆå¹¶æµï¼š
        Stream<String> s1 = Stream.of("å¼ ä¸‰ä¸°", "å¼ æ— å¿Œ", "å¼ ç¿ å±±", "å¼ è‰¯", "å¼ å­¦å‹");
        Stream<Integer> s2 = Stream.of(111, 22, 33, 44);
        Stream<Object> s3  = Stream.concat(s1, s2);
        System.out.println(s3.count());
    }
}

```

â€

â€

```java
package com.itheima.demo3stream;

import java.util.*;
import java.util.function.Function;
import java.util.stream.Collectors;
import java.util.stream.Stream;

public class StreamDemo4 {
    public static void main(String[] args) {
        // ç›®æ ‡ï¼šæŒæ¡Streamæµçš„ç»Ÿè®¡ï¼Œæ”¶é›†æ“ä½œï¼ˆç»ˆç»“æ–¹æ³•ï¼‰
        List<Teacher> teachers = new ArrayList<>();
        teachers.add(new Teacher("å¼ ä¸‰", 23, 5000));
        teachers.add(new Teacher("é‡‘æ¯›ç‹®ç‹", 54, 16000));
        teachers.add(new Teacher("æå››", 24, 6000));
        teachers.add(new Teacher("ç‹äº”", 25, 7000));
        teachers.add(new Teacher("ç™½çœ‰é¹°ç‹", 66, 108000));
        teachers.add(new Teacher("é™ˆæ˜†", 42, 48000));

        teachers.stream().filter(t -> t.getSalary() > 15000).forEach(System.out::println);

        System.out.println("--------------------------------------------------");

        long count = teachers.stream().filter(t -> t.getSalary() > 15000).count();
        System.out.println(count);

        System.out.println("--------------------------------------------------");

        // è·å–è–ªæ°´æœ€é«˜çš„è€å¸ˆå¯¹è±¡
        Optional<Teacher> max = teachers.stream().max((t1, t2) -> Double.compare(t1.getSalary(), t2.getSalary()));
        Teacher maxTeacher = max.get(); // è·å–Optionalå¯¹è±¡ä¸­çš„å…ƒç´ 
        System.out.println(maxTeacher);

        Optional<Teacher> min = teachers.stream().min((t1, t2) -> Double.compare(t1.getSalary(), t2.getSalary()));
        Teacher minTeacher = min.get(); // è·å–Optionalå¯¹è±¡ä¸­çš„å…ƒç´ 
        System.out.println(minTeacher);

        System.out.println("---------------------------------------------------------");

        List<String> list = new ArrayList<>();
        list.add("å¼ æ— å¿Œ");
        list.add("å‘¨èŠ·è‹¥");
        list.add("èµµæ•");
        list.add("å¼ å¼º");
        list.add("å¼ ä¸‰ä¸°");
        list.add("å¼ ä¸‰ä¸°");
        list.add("å¼ ç¿ å±±");

        // æµåªèƒ½æ”¶é›†ä¸€æ¬¡

        // æ”¶é›†åˆ°é›†åˆæˆ–è€…æ•°ç»„ä¸­å»ã€‚
        Stream<String> s1 = list.stream().filter(s -> s.startsWith("å¼ "));
        // æ”¶é›†åˆ°Listé›†åˆ
        List<String> list1 = s1.collect(Collectors.toList());
        System.out.println(list1);

//        Set<String> set2 = new HashSet<>();
//        set2.addAll(list1);

        // æ”¶é›†åˆ°Seté›†åˆ
        Stream<String> s2 = list.stream().filter(s -> s.startsWith("å¼ "));
        Set<String> set = s2.collect(Collectors.toSet());
        System.out.println(set);

        // æ”¶é›†åˆ°æ•°ç»„ä¸­å»
        Stream<String> s3 = list.stream().filter(s -> s.startsWith("å¼ "));
        Object[] array = s3.toArray();
        System.out.println("æ•°ç»„ï¼š" + Arrays.toString(array));

        System.out.println("------------------æ”¶é›†åˆ°Mapé›†åˆ---------------------------");

        // æ”¶é›†åˆ°Mapé›†åˆï¼šé”®æ˜¯è€å¸ˆåç§°ï¼Œå€¼æ˜¯è€å¸ˆè–ªæ°´
        Map<String, Double> map = teachers.stream().collect(Collectors.toMap(Teacher::getName, Teacher::getSalary));
        System.out.println(map);
    }
}

```

---

â€

## ğŸ’¡ æ ¸å¿ƒæ€»ç»“ 

1. â€‹**æµæ˜¯ä¸€æ¬¡æ€§çš„**â€‹ï¼šæµç»è¿‡ç»ˆç»“æ–¹æ³•ï¼ˆå¦‚ `collect`â€‹, `count`â€‹, `forEach`â€‹ï¼‰åï¼Œå°±è¢«å…³é—­äº†ã€‚â€‹**ä¸èƒ½æ‹¿ç€åŒä¸€ä¸ªæµå¯¹è±¡é‡å¤è°ƒç”¨**ã€‚
2. â€‹**ä¸æ”¹å˜æºæ•°æ®**â€‹ï¼šStream æ“ä½œç”Ÿæˆçš„éƒ½æ˜¯æ–°æ•°æ®ï¼ŒåŸæ¥çš„ `list`â€‹ æˆ– `map` å†…å®¹ä¸ä¼šå˜ã€‚
3. â€‹**Lombok ä½¿ç”¨**â€‹ï¼š`@Data`â€‹ è‡ªåŠ¨ç”Ÿæˆäº† getter/setter/toString/hashCode/equalsï¼Œè¿™å¯¹äº `distinct()` å»é‡è‡³å…³é‡è¦ã€‚

---

â€
